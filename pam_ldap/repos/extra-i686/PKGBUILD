# $Id$
# Maintainer: Paul Mattal <paul@archlinux.org>
# Contributor: Comete <la_comete@tiscali.fr>
pkgname=pam_ldap
pkgver=185
pkgrel=1
pkgdesc="LDAP authentication module for the PAM framework"
arch=(i686 x86_64)
url="http://www.padl.com/OSS/pam_ldap.html"
license=('LGPL')
depends=('libldap>=2.4.22' 'pam')
backup=(etc/pam_ldap.conf)
options=(!makeflags)
source=(http://www.padl.com/download/${pkgname}-${pkgver}.tar.gz)
md5sums=('639260f0c81d57a6fcbd1cb47dd6c5e7')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --libdir=/lib \
      --with-ldap-conf-file=/etc/pam_ldap.conf \
      --mandir=/usr/share/man
  PATH="${PATH}:${srcdir}/${pkgname}-${pkgver}" make
  make DESTDIR="${pkgdir}" install
  mv "${pkgdir}/etc/ldap.conf" "${pkgdir}/etc/pam_ldap.conf"
}
