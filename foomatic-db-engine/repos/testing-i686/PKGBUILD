# $Id$
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>
# Contributor: Firmicus <francois.archlinux.org>

# build order: foomatic-db / -filters / -db-engines / -db-hpijs / -db-nonfree

pkgname=foomatic-db-engine
pkgver=4.0.3
pkgrel=2
pkgdesc="System for using free software printer drivers with common spoolers on Unix"
arch=(i686 x86_64)
license=('GPL')
depends=('perl>=5.10' 'libxml2' 'foomatic-filters>=$pkgver' 'bash')
replaces=('foomatic')
conflicts=('foomatic')
source=(http://www.linuxprinting.org/download/foomatic/$pkgname-${pkgver/_/-}.tar.gz)
url="http://www.linuxprinting.org/foomatic.html"
options=('force' '!emptydirs')
md5sums=('fdb02175cc857f63bb06b25ac3b1658b')

build() {
   cd ${srcdir}/${pkgname}-${pkgver}
   ./configure --prefix=/usr
   # standardize Perl installation:
   pushd lib
   perl Makefile.PL INSTALLDIRS=vendor || return 1
   popd
   make || return 1
   make DESTDIR=${pkgdir} install || return 1
   find $pkgdir -name '.packlist' -delete
   find $pkgdir -name '*.pod' -delete
}
