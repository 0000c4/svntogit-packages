# $Id$
# Maintainer: Jan de Groot <jgc@archlinux.org>

pkgname=totem-plugin
pkgver=2.24.2
pkgrel=1
url="http://www.hadess.net/totem.php3"
pkgdesc="Totem mozilla/firefox plugin"
arch=(i686 x86_64)
license=('GPL')
depends=('totem>=2.24.0')
makedepends=('perlxml' 'iso-codes' 'gnome-icon-theme>=2.24.0' 'xulrunner>=1.9' 'gstreamer0.10-base' 'gstreamer0.10-good-plugins' 'gnome-doc-utils>=0.14.0' 'pkgconfig' 'diffutils')
options=('!libtool' '!emptydirs')
source=(http://ftp.gnome.org/pub/gnome/sources/totem/2.24/totem-${pkgver}.tar.bz2)
md5sums=('e85064c48fe28e8e87c1da04a06173df')
	
build() {
  cd "${srcdir}/totem-${pkgver}"
  LD_PRELOAD="" ./configure --prefix=/usr --sysconfdir=/etc \
              --libexecdir=/usr/lib/totem \
              --localstatedir=/var --disable-static \
	      --enable-mozilla --with-gecko=mozilla || return 1
  make || return 1
  pushd browser-plugin || return 1
  make plugindir=/usr/lib/mozilla/plugins \
       xptdir=/usr/lib/mozilla/plugins \
       DESTDIR="${pkgdir}" install || return 1
  popd

  rm -f "${pkgdir}/usr/lib/totem/totem-plugin-viewer" || return 1
  rm -rf "${pkgdir}/usr/share" || return 1
}
