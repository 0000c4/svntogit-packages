diff -Naur valgrind-3.5.0-old//config.h.in valgrind-3.5.0/config.h.in
--- valgrind-3.5.0-old//config.h.in	2009-08-19 23:39:05.000000000 +1000
+++ valgrind-3.5.0/config.h.in	2010-05-22 19:55:31.065364428 +1000
@@ -15,6 +15,9 @@
 /* Define to 1 if you're using glibc 2.10.x */
 #undef GLIBC_2_10
 
+/* Define to 1 if you're using glibc 2.12.x */
+#undef GLIBC_2_12
+
 /* Define to 1 if you're using glibc 2.2.x */
 #undef GLIBC_2_2
 
diff -Naur valgrind-3.5.0-old//configure valgrind-3.5.0/configure
--- valgrind-3.5.0-old//configure	2009-08-19 23:44:07.000000000 +1000
+++ valgrind-3.5.0/configure	2010-05-22 20:01:04.822065382 +1000
@@ -5025,6 +5025,29 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
+#include <features.h>
+#ifdef __GNU_LIBRARY__
+ #if (__GLIBC__ == 2 && __GLIBC_MINOR__ == 12)
+  GLIBC_212
+ #endif
+#endif
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "GLIBC_212" >/dev/null 2>&1; then
+  GLIBC_VERSION="2.12"
+fi
+rm -f conftest*
+
+
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+
 #include <standards.h>
 #if defined(_AIXVERSION_510) || defined(_AIXVERSION_520) || defined(_AIXVERSION_530)
   AIX5_LIBC
@@ -5171,6 +5194,18 @@
 _ACEOF
 
 	DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
+	DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
+	DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
+	;;
+     2.12)
+     	echo "$as_me:$LINENO: result: 2.12 family" >&5
+echo "${ECHO_T}2.12 family" >&6
+
+cat >>confdefs.h <<\_ACEOF
+#define GLIBC_2_12 1
+_ACEOF
+
+	DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
 	DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
 	DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
 	;;
diff -Naur valgrind-3.5.0-old//configure.in valgrind-3.5.0/configure.in
--- valgrind-3.5.0-old//configure.in	2009-08-19 23:37:48.000000000 +1000
+++ valgrind-3.5.0/configure.in	2010-05-22 19:54:43.788423252 +1000
@@ -656,6 +656,16 @@
 ],
 GLIBC_VERSION="2.10")
 
+AC_EGREP_CPP([GLIBC_212], [
+#include <features.h>
+#ifdef __GNU_LIBRARY__
+ #if (__GLIBC__ == 2 && __GLIBC_MINOR__ == 12)
+  GLIBC_212
+ #endif
+#endif
+],
+GLIBC_VERSION="2.12")
+
 AC_EGREP_CPP([AIX5_LIBC], [
 #include <standards.h>
 #if defined(_AIXVERSION_510) || defined(_AIXVERSION_520) || defined(_AIXVERSION_530)
@@ -741,6 +751,13 @@
 	DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
 	DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
 	DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
+	;;
+     2.12)
+	AC_MSG_RESULT(2.12 family)
+	AC_DEFINE([GLIBC_2_12], 1, [Define to 1 if you're using glibc 2.12.x])
+	DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
+	DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
+	DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
 	;;
      aix5)
 	AC_MSG_RESULT(AIX 5.1 or 5.2 or 5.3)
