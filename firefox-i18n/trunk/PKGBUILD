# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.9
pkgrel=1
_languages=af,ar,be,bg,bn-IN,ca,cs,cy,da,de,el,en-GB,eo,es-AR,es-ES,et,eu,fi,fr,fy-NL,ga-IE,gl,gu-IN,he,hi-IN,hu,id,is,it,ja,ka,kn,ko,ku,lt,lv,mk,mn,mr,nb-NO,nl,nn-NO,oc,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,te,th,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('da750827ddf1aaa6c3b09fbb7ca4ebfc'
         '3beb35aeb195552627394b7769f09c5e'
         'cc25e1dfe322e163edd453b54b18ed6c'
         '3a24f88aed1ec222739909467d45c36f'
         '458dc3b51d94dfb92180b6513da33768'
         '6100761f50681a27ecee4b9d43968090'
         '33f8922cf3f574ddfc40e350e09e1ee8'
         '1aac80931215e85a9434821318322840'
         '0fdce63787e71ade32f4150555db446c'
         'c40760c6b6ec0a5d43d708d175af71e0'
         '8a861ec0bc928f7d2babb9c9fdac7afa'
         'b5318a854916e712a79f7d3022c82d58'
         '5d82688be741219e4a2e884c27674d06'
         '3b786beb412062770cf921b7dfc7c412'
         '4c4913ba9e21903bc979ff2883256cdb'
         '2fab4572520a5062d69815bfcde647b5'
         'd42995bda0f79edb8115f995e1ecf44f'
         '7438e9461d20a65c13514ee340db4369'
         '7be481c1595300ec83ca0632a0e5fd8f'
         '6784c85f27219f04daecc2151a3ffa3a'
         '479d5ab78dee9aa3b23ca14e39721034'
         'e98a62f1c4096fb471f8d858d01d044f'
         '59fbe6d0584b5c6c0adff7d16ef8ea51'
         'f62a1d67104514da3aad97481e16e81e'
         '0e43c81c9bd55c5feedcdcab2fb9c4df'
         'd2e1c28de1be2474ff42c54727cd8c07'
         'c78d170dca0d767c8d9bc31954cd2324'
         'dafc51a775d512e3b34601c2a2291f76'
         '76e95f638d7499fe36e5db2aa4446fc1'
         '2a12e9ed49515a3e4210224d37f325ca'
         'b904d86f667768c7554f7ac1630e2fc7'
         '466ee82c40244cb0f3308798ae3ef1df'
         '8e3ab0ac7127b9e651fa8150803d59fa'
         '6e817a315663b926c4bcee48ef025195'
         '67cb1f812b5e1ad2cd58d77e34e5e154'
         'bc22bb46828c4a929c1e2ec41b090c97'
         'ee4d58656343e0f0ee54e066d7e72451'
         '9b2ac04cffc153a752b4ff6e000b2a29'
         '329283f9e7a7aaa8a8e5f5ae7e62660d'
         '13c5186b51ab3c5374620adf8e5c3576'
         'a2b1f79253729735ad2e59568144f1b4'
         'ccb9763952394717a8b5ec3dec877706'
         'e508856e25040ffb87e023de94dca70b'
         '322eaad0dd48a464187000ea0be5362a'
         '3632809f34b423ad3ba31077682bbf26'
         'fa15ae8bb4927d416abd3f1661dd4af9'
         '5b8d7b418c477060a78f334d2928702d'
         '3d5f4b14ae257ed03096757d6a05b217'
         '4ad2c7aca6a890078f511bf4224e5347'
         '18754e6cb9cee7b408702bd35cadeb0d'
         '892701fea3cc09c4350f19ed5c9900ac'
         '0a939cce9bbff751da5a1e006a26093f'
         '1e3aeeb18c2958d81ee6eb4801aa9faa'
         'cb29c96ac0dd5ece19e78653e74da48a'
         '9517325ea18e01007787b5e3210c776c'
         'c61320979392169249da20a48f81d2a8'
         'a2765b25542e7e4d43279f098ea97e72'
         'cc42c2b4151c5c41543507d5a4eb699d'
         '195bb042493f8dc4bda09a66c8a2f49e'
         'fe36d87eb352e46459b3c2cc01c4dc2f'
         '2b73195d3c12fb8ebfd39f30267d3e64')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.manifest || return 1
  done
}
