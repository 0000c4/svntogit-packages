# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.1
pkgrel=1
_languages=af,ar,be,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,fy-NL,ga-IE,gu-IN,he,hu,id,it,ja,ka,ko,ku,lt,mk,mn,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('b9256370a1c7c6d251f84d4381e031ae'
         '3b409c4d3eef63d7b636ef9bf3e3d0d9'
         'dd0b79116ce3fddf36cca03433368553'
         'b4a23daaca8da7f49996f767c97d5fed'
         '152c44433eafbc80391850549fe3cba9'
         'e941178f0308ff5d1cb06adb833bbf10'
         'bc3f48d0b7fb1968ebd39a8a4603f274'
         '3bc40ec6561c0d933ec5d990899c1772'
         '9701736dd9aafce0901d76fb0bbe7268'
         '5d04eec835044a3661bf1eceedfdaac7'
         '2d818a568abb0901bb648a7155ab19ce'
         'ab292da2d73f794d54997415beea1eb4'
         '5754f97b3db931afd3bff04ccde08244'
         '961e7d88656a9c5571685e445c4fa5b1'
         'b0324cb8567dd53581c71799e964335c'
         '05883cfaa595e1a45e5230bd6c85d51a'
         '37b4abee392bab5abdee1cf7f5ef57e3'
         '5fd28947a156ded89c63ee5ff3bd35a1'
         'f98c89ea72845a14c818494d81a5c8c6'
         '43f99d29f106a9da1d1747b3464aa29a'
         'c8b2617562a69bdc665b481944156bda'
         '4a504bcd4ab015f70089dfdad86b87ed'
         '6024b4b8f0d04f44acf0a315c94df2e4'
         '1489aeb3ca25aee8229dcc0182c03ee9'
         '3371270cec56af687eb03f9c8ca2b478'
         '904194b0c05a5e0f604a719695eb8a41'
         '0759dfee53110adc2af030d5a632b817'
         '496787dc4886ded7a2b482a6b5f526c2'
         '62c8aa0d9799eda0f7d7e354064ca160'
         'a63ea22afaee2bc372f747da53b25e9a'
         '53d14287a25f1311211b96586057b1e1'
         '051e212e30d25c374a63d60131c5b805'
         'a88980f26cddd5b77f415f94408e10cc'
         '66b2fbaae744be3806722e70b6dcdbf9'
         'e999ef5309967d102ed410cc11cc830c'
         'b2cc0dec84a2b32b00e76bf0eafc524c'
         '015ae04e908c6d670060a93303284205'
         '982a44f616e46c71c518049135162575'
         '609f9829f703f43b7626bf83877c4331'
         'd2f04f6cd34cd1bac47ab2a01483c504'
         '1a4ef0aab9f1c2211519cf3bb50eb363'
         '01a6284f1f75830b127b6c4a581402cb'
         '5f5c41d92d59b1b9cf9c31851cdf204c'
         '7a2ac560175c2a18c5703b048c41c8bf'
         'cc6fc17478de30909222c1cac11653b7'
         '9b7cebeb727899a690d619e935985c0d'
         'd64744bd1a56a56ec68c6695c3129e76')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.manifest || return 1
  done
}
