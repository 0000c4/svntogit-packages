# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0
pkgrel=1
_languages=af,ar,be,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,fy-NL,ga-IE,gu-IN,he,hu,id,it,ja,ka,ko,ku,lt,mk,mn,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('cfe5e020ba4f55ea0ec07eef93277887'
         '463ac931c05609ea0feba2d86229d9a4'
         '4fda6662ef2e0bc2aea3e7b6f8bf00a2'
         'f61b432188c536a754d117db33c3a704'
         'e289285026a4a36ff5b01ef6dc821aa3'
         '2563c02f269c4f5614b3e3cac92ad0cf'
         '635d3d7ab3d00d216cb536597da10811'
         '06aead9675be631ca30e693988db0fda'
         'cd07b3a50fb09210eb276822a1796c95'
         '871fa9b2c82ab5b8218e9e78321d33d4'
         '7dda693b83ad73f4fe2dc1d2e45119a2'
         '4a987d6a0d5c73bf6dc3c30506fc3cf5'
         'eb2c382326e938d7e63bb0da4030c99d'
         '8f69a6704b1ef174ed2ac02f5d6ef4bb'
         'e02449c4edc545b27042824b9fab3111'
         'f73c543cbc061b23d2c461be2e298ff4'
         '29db3125bfe1ba8f9f5defd2bc09c7b8'
         '866cd594418d092536eacb010065090d'
         '887bd67baa1f3db1dee405f0d4ae41b9'
         'f9a0ab59307210e367aca9a2f58c9827'
         'e1b04c2b0b121fb8f9ae03d676876bb5'
         'f0b2b1e262c843f4efbc0f8f73c3dfca'
         'a9faa07c672439764d5d94da4c764f0d'
         'd99306eec7106073811addd14310a045'
         'fb7c13d181fbf449d4946a9234330b03'
         '9235f440523e0d7959b45b5ba8c017fe'
         'eaf32a9e15bdac05652ba274dfdaaf5c'
         '8e5ab6ee10cc41cc98c5738a78530584'
         '9c0f6c2b9fe316dc02422004edda6a8b'
         'b118a989c45934d1b27c0cab8722750e'
         'b342ab6de274c7db2b7efc45b6c958e9'
         '5889bdd4adb04db1d2ceeaea25f1e8d3'
         '45e551f2ba0c92e654a88d2849dc355d'
         '33d8f04a939af929b5d84165bc52ba39'
         '820e4a23c297c1debd719bc008aa600b'
         'cdbeb88294bc88b98a5366a21aca756c'
         '5d859ace1156d06efa6ba0a10fcd6af2'
         '2ac042acb3886c253fea82815934c4ae'
         '113880c8d92b751aaafd5af5f9f14256'
         'bd474e7f518b4db3581a05e640fdff4f'
         '57074d9a9962efdf381e3baacef3ad35'
         '300800b0e736889d4d9a7c45284832ea'
         'fa1848d376aa0f0fca023221e5b88dc6'
         '5fce46393b768525c5f2aa8363276131'
         '82a13c48e106eee42d2deab8f7cb37b5'
         'd6d92b42495e5e1c7acd0e63b2b425fb'
         '35e454436c9eec0c7a85b1b5860315cd')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.manifest || return 1
  done
}
