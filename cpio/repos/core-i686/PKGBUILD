# $Id$
# Maintainer: judd <jvinet@zeroflux.org>
pkgname=cpio
pkgver=2.9
pkgrel=5
pkgdesc="A tool to copy files into or out of a cpio or tar archive"
arch=(i686 x86_64)
license=('GPL')
url="http://www.gnu.org/software/cpio"
groups=('base')
depends=('glibc')
source=(ftp://ftp.gnu.org/gnu/cpio/cpio-${pkgver}.tar.gz
	cpio-gcc43.patch)
install=cpio.install
md5sums=('2bb997a33555d4dc79d45d0cdf02cedd')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -Np1 -i ../cpio-gcc43.patch || return 1
  ./configure --prefix=/usr --mandir=/usr/share/man
  make || return 1
  make DESTDIR=${pkgdir} install
  rm -f ${pkgdir}/usr/bin/mt ${pkgdir}/pkg/usr/share/man/man1/mt.1
  mv ${pkgdir}/usr/bin ${pkgdir}/bin
  rm -rf ${pkgdir}/usr/libexec
  # remove mt manpage it conflicts with mt-st from extra
  rm $pkgdir/usr/share/man/man1/mt.1 || return 1
  # remove infodir
  rm $pkgdir/usr/share/info/dir
}
