# $Id$
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Maintainer: Bart≈Çomiej Piotrowski <bpiotrowski@archlinux.org>

pkgbase="libreoffice-i18n"

_rcver=4.2.3.3
pkgver=4.2.3
pkgrel=1

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('any')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
#http://download.documentfoundation.org/mirrors/all.html
_url="http://download.documentfoundation.org/libreoffice/stable"
#_url="http://download.documentfoundation.org/libreoffice/testing"
#_url="http://dev-builds.libreoffice.org/pre-releases"
#_url="http://www.libreoffice.org/download/pre-releases"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

declare -A _languages
_languages=(
  [af]='Afrikaans'
  [am]='Amharic'
  [ar]='Arabic'
  [as]='Assamese (India)'
  [ast]='Asturianu'
  [be]='Belarusian'
  [bg]='Bulgarian'
  [bn]='Bengali'
  [bn-IN]='Bengali (India)'
  [bo]='Tibetan'
  [br]='Breton'
  [brx]='Bodo'
  [bs]='Bosnian'
  [ca]='Catalan'
  [ca-valencia]='Catalan (Valencia)'
  [cs]='Czech'
  [cy]='Welsh'
  [da]='Danish'
  [de]='German'
  [dgo]='Dogri'
  [dz]='Dzongkha'
  [el]='Greek'
  [en-GB]='English (GB)'
  [en-ZA]='English (ZA)'
  [eo]='Esperanto'
  [es]='Spanish'
  [et]='Estonian'
  [eu]='Basque'
  [fa]='Persian'
  [fi]='Finnish'
  [fr]='French'
  [ga]='Irish'
  [gd]='Gaelic (Scottish)'
  [gl]='Galician'
  [gu]='Gujarati'
  [he]='Hebrew'
  [hi]='Hindi'
  [hr]='Croatian'
  [hu]='Hungarian'
  [id]='Indonesian'
  [is]='Icelandic'
  [it]='Italian'
  [ja]='Japanese'
  [ka]='Georgian'
  [kk]='Kazakh'
  [km]='Khmer (Cambodia)'
  [kmr-Latn]='Kurdish'
  [kn]='Kannada'
  [ko]='Korean'
  [kok]='Konkani'
  [ks]='Kashmiri'
  [lb]='Luxembourgish'
  [lo]='Lao'
  [lt]='Lithuanian'
  [lv]='Latvian'
  [mai]='Maithili'
  [mk]='Macedonian'
  [ml]='Malayalam'
  [mn]='Mongolian'
  [mni]='Manipuri'
  [mr]='Marathi'
  [my]='Burmese'
  [nb]='Norwegian Bokmal'
  [ne]='Nepali'
  [nl]='Dutch'
  [nn]='Norwegian Nynorsk'
  [nr]='Ndebele (South)'
  [nso]='Northern Sotho'
  [oc]='Occitan'
  [om]='Oromo'
  [or]='Oriya'
  [pa-IN]='Punjabi (India)'
  [pl]='Polish'
  [pt]='Portuguese'
  [pt-BR]='Portuguese (Brasil)'
  [ro]='Romanian'
  [ru]='Russian'
  [rw]='Kinyarwanda'
  [sa-IN]='Sanskrit (India)'
  [sat]='Santali'
  [sd]='Sindhi'
  [si]='Singhalese'
  [sid]='Sidama'
  [sk]='Slovak'
  [sl]='Slovenian'
  [sq]='Albanien'
  [sr]='Serbian'
  [sr-Latn]='Serbian (Latin)'
  [ss]='Swati'
  [st]='Southern Sotho'
  [sv]='Swedish'
  [sw-TZ]='Swahili (Tanzania)'
  [ta]='Tamil'
  [te]='Telugu'
  [tg]='Tajik'
  [th]='Thai'
  [tn]='Tswana'
  [tr]='Turkish'
  [ts]='Tsonga'
  [tt]='Tatar'
  [ug]='Uighur'
  [uk]='Ukrainian'
  [uz]='Uzbek'
  [ve]='Venda'
  [vi]='Vietnamese'
  [xh]='Xhosa'
  [zh-CN]='Chinese (simplified)'
  [zh-TW]='Chinese (traditional)'
  [zu]='Zulu'
)

# There is no easy way to determine which languages has helppacks, so we
# list them directly here.
source=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_am.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ast.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_bg.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_bn-IN.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_bn.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_bo.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_bs.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ca-valencia.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ca.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_cs.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_da.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_de.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_dz.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_el.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_en-GB.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_en-ZA.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_eo.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_es.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_et.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_eu.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_fi.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_fr.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_gl.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_gu.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_he.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_hi.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_hr.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_hu.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_id.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_is.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_it.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ja.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ka.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_km.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ko.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_mk.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_nb.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ne.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_nl.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_nn.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_om.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_pl.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_pt-BR.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_pt.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ru.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_si.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_sk.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_sl.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_sq.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_sv.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_tg.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_tr.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_ug.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_uk.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_vi.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_zh-CN.tar.gz
        ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_zh-TW.tar.gz)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # remove dictionaries if shipped - we ship them now in separate packages
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done

    # the helppack rpm goes also into the langpack dir
    # so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="${_languages[$1]} language pack for LibreOffice"
  provides=("openoffice-$1" 'libreoffice-langpack')
  replaces=("openoffice-$1")
  conflicts=("openoffice-$1")

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}

for lang in ${!_languages[@]}; do
  _pkgname=libreoffice-$lang
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_$lang.tar.gz)

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $lang
  }"
done

md5sums=('39c3d76d17dddf5ea4c17c6556dae635'
         '2eee62c53854549582401aefeb64fe9b'
         'a6a96ea60878de65ae8ab2ff8218a80a'
         '86f03bb719f34c4a520d64914d107a3a'
         '8d4c38fe667966568bdcd1dc9ffab208'
         'db5e313d88eea54cb1e27190b90ea458'
         'bc9d50140fe66d459188cbc6c5e5549e'
         '37f7618c63ab743b3e1e3087ceb392eb'
         '9f571e86df73147e543b608b68ea6951'
         'e06d96fa174c32f10122212f4c9628e4'
         '4ba55a4a6d6d9545c30ea0168d634d8d'
         '7e1d85c826e281594defa655054db0e7'
         '1c4aaecb8130c76e856b77d41b2a183d'
         '73a2ec8a10293347849daa6f3ce0a25d'
         'ad0a252396fb3adfbaf900107cb819dd'
         '3aa67ae9a509e690ee0099a2cc7671a9'
         '433f2a17fa4216fc2dcd871b6617427a'
         '22c8bd15319e10a0e19b024d5a5aaf1e'
         '83e3d3de4d3fb32c51ea657025587765'
         '08d046521d6f47198b6c59da15e375ea'
         '8c8746531f1920dcc316906590778ef3'
         'a6886c1c717c1c4fdcabb9ebe9677d36'
         'ea9a408bb2944c71878f17f11bbc89e2'
         '45b542d22bf06fb539466de4810b5925'
         '6a79631e229cef14b630021641335be8'
         '3813862f6723d271312351e7fe26deb7'
         'ee58872b9a7c650a4ebf73e8daafb449'
         '6f78c2d0fa605a6198228658de47c317'
         '3ce117e024b35acfd6b44bbc7cb3367f'
         'b307aa1cc5359af478db0c32ba93522c'
         '565142a634ec15508e69e84f5751e80d'
         '02f8170b9fbdaf7d0eb43cf5828ae138'
         '9f0675e2ba5ea7e47171e0b55957fc60'
         'ee17c999da9fab836431aa057410b80e'
         'b28507dea89b0eff5beef213d917aac1'
         'c303d289bca00ca72580998cc41e92af'
         'f10472f66fd64f9282216b2257a862f7'
         '6a0655c98ecf10fae9eb09a912b4aee5'
         '3c0bbfb5a5fc5fd14fa4c0a586b49e82'
         'cbbd56df176f2b9eec2b2bc845e7a19f'
         'ea5cd980ad7baacd8128a14c3a3721db'
         'c968838d2543bd46565affedc5e9d093'
         '3cff3ffe74c417282695b550c1e75586'
         'c2342529b593227a0817a29be3d0ce79'
         '464db9bcc3f97146d692c1ff1c2291fe'
         '0c8bd3f38d902190219251a1bda4fdcc'
         'b5415109067aeb3f42d52548a8bf82ce'
         '988f9dd154147b0f26f942df31e4d6ae'
         'dcbd2c0466e7a99ae41a95e9df043e42'
         'fdd71247e68e00231777b35de4609703'
         'be7a908b9f8bf6f0d48ddd5bcc9332a7'
         '14d3257bf793138e94085047f9b8457c'
         '029b42314965ee572414da70137f8dff'
         'f5886ef015ba0b610233a5c636efbf8c'
         '135c8d0990305041db59b958fef886ec'
         'af68391111de2690114b73ce10062f80'
         'd7603a8c22f31b4eadac7e15875d033b'
         '4465b22a43418076e3a257f06b93e84b'
         '8c8f67d6acc4d2e90c7d6634ccd026b2'
         '4598ba74d857b881d302582d76261551'
         'aa76b2bc3aa0d4a788e26e342589d96b'
         '5fea856e64e1ecaec9501fbede58473c'
         'e72d510a3325b18592cbbb2ec2d0b4dc'
         '300233191bf6915ffd7ae04ca207b3c3'
         'c1f53e24acba7e7ac9ec7311e6114f73'
         '15dbc73a75fccd8dcdd2cbc787ef0558'
         '0711c875128fed6621f41427f94cc012'
         '7c7e1a25eaa8bd27b8b86c6e5bb993de'
         '232fc6ddb2d149fb076a4f37fce645df'
         '8f2f662dc6eeddcc7fbe9f9295968571'
         '7a5e04486107c2eb0735abdd474b0a08'
         '34401a5a497ec2802d167fa0e30bba4a'
         'f99b13079e5ec0872a3acd29cfa7a8e0'
         '00343b88ac26c995fab528ad00a07f35'
         '15158c456f56a17c017a0558f235c994'
         '05ec735ac4b18daaa6ba864f0e02976b'
         '666b1723ef48516b715fd3ffc55df457'
         'dcd134ddedd5d59f16d3bc4950b279c7'
         '142e109031700be00ce36d75207c6111'
         '861fd849792b7e939e5fca1c5b866e8b'
         '65e9114fa4deacb0f5b40ab5d641ee4e'
         'f86a19be97e6f6f9bea51e33c4e31eb5'
         'bbedf0a221070ebe37607131a7cb4183'
         '70345d1349e2481032b68f6362094979'
         'd03e28e107263a75e34eb66a9b5e268d'
         'd63fc612b51b6334351e08bee57602c8'
         '988083536ce2244bb15364b087a5615b'
         '990ca8a2819de53f9af89befb58f4408'
         '37a7e33c1fb6290b8617ae7f678979d8'
         '177f03d1a017bcd1bf282ab16662bb07'
         '72a952e080881ae8c2c91519d8c88807'
         '0aeeda76670888f6d2cd85135c6f164a'
         '04eb6990045221000983508fea05b2bb'
         '71e5b6a2bd5dc29d920abf8a6a961f6a'
         '6b860619ea992958d6c043e55ee9a4c0'
         '7f3e75743d3d4060d0d8bf2e8518378a'
         '53c7c5247852a74f47eca6136b2d7113'
         '2f5449db4bd66900e318d9a5d1d1c4eb'
         '24506c302d480fc9f1a62619351be2b6'
         'a1819ece6da89184381d990c42f18b10'
         '986ee12c6283c28e30fb6ea048cf948e'
         '63bf2d1420deee96f0dd8f0cbb6bd878'
         '2188a3ae08e5b1434401ff0e4d7828ea'
         'e172f4f44647da41333ebafe6916b31e'
         'ac9e7186d7ff63bbb65720ec090edbfd'
         'bc63e3d2b003bd419817988e610ced89'
         '050c9f03ff50045941155b795e1b2c31'
         'f3920233533e28c03080570740470caa'
         'acef74d4e8bde6492c32549383860b6b'
         '4b5dd92ac03c3429775bcf3ddf0ca163'
         '2442761cfab328fd3250bcfc884071fd'
         'b42f9469a22d3b4877c0b25cba90b482'
         '3a43d8cdab2b9dac73a2e700d6c26b3b'
         '93948ee49a19f06587d99ef8e5744527'
         'd0e29b9697019aadecc6bc07dd9da0e3'
         '5bb75ed8a29d58a8929a77b71e0b0783'
         '0f91b0c2ff708fb70c4aa17890962971'
         'a18ef786d4e845141166838b9e46d016'
         '319e15785aa57eae411ddad41e91f646'
         'a289bd7efcdc060549786a7da63b5d58'
         '4cd49af8536665a8548d4522abc71483'
         'c21680d07cab56f28fa0b9e207fac95a'
         'b2beda94d562c61f683bfbfe7659f2f4'
         '9f91f5dd5fd3293d81c1b80bdb8a4872'
         'f929c1ac93d7f481a94a22ae1686c514'
         'ea00b755bbd37c6cb5d39a864c8d85fb'
         'ba47e121777751083fbb131bcd6fc5c7'
         'a9bc3e5e7242953c3449d8e014bac2bc'
         '45f3da2492f4d8933688efbe8de4690c'
         'c4ce68f2336e0a13a90346d5ee6e78d5'
         'd046331b0feea60e88665bc4b9605049'
         '4d8e1dad8b99d13b3b552315e671ef59'
         'd77a5066c3ac90078bb6d184770c5f45'
         'fdcb18b13137a6d3a63fcce1ae945a48'
         'de19e6e3969f12cf28c33821ea2c5471'
         '87bf92ba0597970354242354891a1051'
         '3acd6f6c494b3a7bf54d18bf1769018e'
         'c613cf0fac733c2dde53b112a227a0eb'
         'e3c5fe51e67bf8d9c60bc33105e23ed9'
         '2edd37a1249783dbcdfdb3b2dc356ceb'
         '6bd4dabd5b5d87000fe43809e0cdb0e8'
         '6e9ae080d7e0f83ec3da0240afaf02fb'
         '1a05aee7ce52062cb9da0a6a1028f136'
         '8d91da66ad03e7b515e5dab8ed2f9902'
         'f8ab2d17dc3afd85c0c269d2cf6264e6'
         '6b7d3abebed9286cf41c2355459563e7'
         '2b70190fb91a7e966ce3b965a69feb88'
         '12384e468778a27fa7fe44d2004a3afd'
         '0b47035c5fea29db134d477385bc7de1'
         '017cf7118b35b98e5aebab66366844c0'
         '68f4ba9b6e833ee34e8bfa3d11585e81'
         'ef77e2c5f493d9fc7ba84e739e59e6e5'
         '09a5c61a2f1a7d8dc7ac996de6f421b1'
         '5445656a1616237a01e4e44ea4a3bd68'
         '1eab28923afb8fa65f79a5d6d2eca374'
         'd89ad68c763fe42cd40e897076a0bff2'
         '109f7a28e984a30102e10602c52521a1'
         '8b796363a2ad4c8d5dfd4dae5af82ddb'
         'd145bf21bbeb1e3daf36d7f7098dfdea'
         'f497af06086b7601005fec41a6ba9ce3'
         'f99ffe8f25731834d44a76e208d333bd'
         '0043c27f6e07a2cfdce485f31c5e7d4f'
         'b683b66621170b09b98e0ef74bdc92e9'
         '0111726e9b8cbf030f9cd4de5f98ba6b'
         '7ea613a4ea871d63ecc30df0d382cdc2'
         '44a88d8ed2375aba534d9a51ab01d18d')
