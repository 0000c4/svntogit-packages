From: Aaron Seigo <aseigo@kde.org>
Date: Tue, 22 Nov 2011 20:10:45 +0000
Subject: fix build
X-Git-Url: http://quickgit.kde.org/?p=kdeplasma-addons.git&amp;a=commitdiff&amp;h=6967ee53518136651b4fd5d691293a3c866d7a47
---
fix build
---


--- a/libs/lancelot-datamodels/OpenDocuments.cpp
+++ b/libs/lancelot-datamodels/OpenDocuments.cpp
@@ -66,41 +66,41 @@ OpenDocuments::~OpenDocuments()
     delete d;
 }
 
-void OpenDocuments::Private::connectTask(TaskPtr task)
+void OpenDocuments::Private::connectTask(::TaskManager::Task *task)
 {
     Q_ASSERT(task);
     connect(
-        task.constData(), SIGNAL(changed(::TaskManager::TaskChanges)),
+        task, SIGNAL(changed(::TaskManager::TaskChanges)),
         this, SLOT(taskChanged())
     );
 }
 
 void OpenDocuments::load()
 {
-    foreach (TaskPtr task, TaskManager::TaskManager::self()->tasks()) {
+    foreach (TaskManager::Task *task, TaskManager::TaskManager::self()->tasks()) {
         if (d->setDataForTask(task)) {
             d->connectTask(task);
         }
     }
 
     connect(
-        TaskManager::TaskManager::self(), SIGNAL(taskAdded(TaskPtr)),
-        d, SLOT(taskAdded(TaskPtr))
+        TaskManager::TaskManager::self(), SIGNAL(taskAdded(::TaskManager::Task*)),
+        d, SLOT(taskAdded(::TaskManager::Task*))
     );
 
     connect(
-        TaskManager::TaskManager::self(), SIGNAL(taskRemoved(TaskPtr)),
-        d, SLOT(taskRemoved(TaskPtr))
+        TaskManager::TaskManager::self(), SIGNAL(taskRemoved(::TaskManager::Task*)),
+        d, SLOT(taskRemoved(::TaskManager::Task*))
     );
 }
 
-void OpenDocuments::Private::taskAdded(TaskPtr task)
+void OpenDocuments::Private::taskAdded(::TaskManager::Task *task)
 {
     connectTask(task);
     setDataForTask(task);
 }
 
-void OpenDocuments::Private::taskRemoved(TaskPtr task)
+void OpenDocuments::Private::taskRemoved(::TaskManager::Task *task)
 {
     Q_ASSERT(task);
     int index = indexOf(task->window());
@@ -115,10 +115,10 @@ void OpenDocuments::Private::taskChanged
     TaskManager::Task* task = qobject_cast<TaskManager::Task*>(sender());
     Q_ASSERT(task);
 
-    setDataForTask(TaskPtr(task));
+    setDataForTask(task);
 }
 
-bool OpenDocuments::Private::setDataForTask(TaskPtr task)
+bool OpenDocuments::Private::setDataForTask(::TaskManager::Task *task)
 {
     Q_ASSERT(task);
 

--- a/libs/lancelot-datamodels/OpenDocuments.h
+++ b/libs/lancelot-datamodels/OpenDocuments.h
@@ -26,8 +26,6 @@
 #include <taskmanager/taskmanager.h>
 #include <QSet>
 
-using TaskManager::TaskPtr;
-
 namespace Lancelot {
 namespace Models {
 

--- a/libs/lancelot-datamodels/OpenDocuments_p.h
+++ b/libs/lancelot-datamodels/OpenDocuments_p.h
@@ -24,8 +24,6 @@
 #include <taskmanager/taskmanager.h>
 #include <QSet>
 
-using TaskManager::TaskPtr;
-
 namespace Lancelot {
 namespace Models {
 
@@ -44,16 +42,16 @@ public:
 
 public Q_SLOTS:
     void taskChanged();
-    void taskAdded(TaskPtr task);
-    void taskRemoved(TaskPtr task);
+    void taskAdded(::TaskManager::Task *task);
+    void taskRemoved(::TaskManager::Task *task);
 
-    void connectTask(TaskPtr task);
-    bool setDataForTask(TaskPtr task);
+    void connectTask(::TaskManager::Task *task);
+    bool setDataForTask(::TaskManager::Task *task);
 
     int indexOf(WId wid);
 
 public:
-    QMap <WId, TaskPtr > tasks;
+    QMap <WId, TaskManager::Task *> tasks;
     QList <SupportedTask> supportedTasks;
 
 private:

From: Aaron Seigo <aseigo@kde.org>
Date: Tue, 22 Nov 2011 13:07:59 +0000
Subject: remove outdated using statements
X-Git-Url: http://quickgit.kde.org/?p=kdeplasma-addons.git&amp;a=commitdiff&amp;h=b0c70d7fd866efb628036f43978bc791e0485f90
---
remove outdated using statements
---


--- a/applets/icontasks/taskitemlayout.h
+++ b/applets/icontasks/taskitemlayout.h
@@ -32,9 +32,6 @@ class TaskGroupItem;
 class AbstractTaskItem;
 class LauncherSeparator;
 
-using TaskManager::StartupPtr;
-using TaskManager::TaskPtr;
-
 /**
  * A Layout for the expanded group
  */

--- a/applets/icontasks/tasks.h
+++ b/applets/icontasks/tasks.h
@@ -54,15 +54,6 @@ namespace TaskManager
 class GroupManager;
 } // namespace TaskManager
 
-using TaskManager::StartupPtr;
-using TaskManager::TaskPtr;
-using TaskManager::StartupPtr;
-using TaskManager::GroupPtr;
-using TaskManager::AbstractGroupableItem;
-using TaskManager::TaskItem;
-using TaskManager::TaskGroup;
-using TaskManager::LauncherItem;
-
 class TaskGroupItem;
 class GroupManager;
 

