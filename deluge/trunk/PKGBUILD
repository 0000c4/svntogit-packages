# $Id$
# Maintainer: Hugo Doria <hugo@archlinux.org>

pkgname=deluge
pkgver=1.2.0
pkgrel=1
pkgdesc="A bittorrent client written with python and pygtk"
arch=('i686' 'x86_64')
url="http://deluge-torrent.org/"
license=('GPL3')
depends=('pyxdg' 'dbus-python' 'setuptools' 'libtorrent-rasterbar>=0.14.7' 'twisted' 'pyopenssl' 'xdg-utils')
makedepends=( 'intltool' 'pygtk' 'librsvg' 'python-mako')
optdepends=('python-notify: libnotify notifications'
	    'python-chardet: needed for UIs'
	    'pygtk: needed for gtk ui'
	    'librsvg: needed for gtk ui'
	    'python-mako: needed for web ui')
source=(http://download.deluge-torrent.org/source/${pkgname}-${pkgver}.tar.bz2 deluged deluged.conf.d)
install="deluge.install"
md5sums=('13ac84e9b5b0293eccb5d89a9fc49461'
         'a462fc27d283ecec9bbd52b840d27262'
         '332d23fe0d21ce92b494efd73322856c')
build() {

  cd "${srcdir}/${pkgname}-${pkgver}"

  python setup.py build || return 1
  python setup.py install --prefix=/usr --root="${pkgdir}" || return 1

  install -d -m755 "${pkgdir}"/srv/deluge || return 1
  install -D -m644 deluge/data/pixmaps/deluge.svg "${pkgdir}"/usr/share/pixmaps/deluge.svg || return 1
  install -D -m755 "${srcdir}"/deluged "${pkgdir}"/etc/rc.d/deluged || return 1
  install -D -m644 "${srcdir}"/deluged.conf.d "${pkgdir}"/etc/conf.d/deluged || return 1
}
