# $Id$
# Maintainer: Andrea Scarpino <andrea@archlinux.org>

pkgname=kactivities
pkgver=4.7.80
pkgrel=2
arch=('i686' 'x86_64')
pkgdesc='API for using and interacting with Activities'
url='http://kde.org/'
license=('GPL' 'FDL')
depends=('kdelibs')
makedepends=('cmake' 'automoc4')
source=("http://download.kde.org/unstable/${pkgver}/src/${pkgname}-${pkgver}.tar.bz2"
        'fix-activities.patch')
sha1sums=('c619c5d6e3e2ef79d0cebf52bf18d1b467dc24f9'
          '6eb890958726856cf4ddb172acd46ba08f7a5088')

build() {
  cd "${srcdir}"/${pkgname}-${pkgver}
  patch -p1 -i "${srcdir}"/fix-activities.patch

  cd "${srcdir}"
  mkdir build
  cd build
  cmake ../${pkgname}-${pkgver} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd $srcdir/build
  make DESTDIR=$pkgdir install
}
