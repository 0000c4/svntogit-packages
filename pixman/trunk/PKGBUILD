# Maintainer: Jan de Groot <jgc@archlinux.org>
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Contributor: Alexander Baldeck <alexander@archlinux.org>

pkgname=pixman
pkgver=0.38.0
pkgrel=1
pkgdesc="The pixel-manipulation library for X and cairo"
arch=(x86_64)
url="https://cgit.freedesktop.org/pixman/"
license=('custom')
#makedepends=('meson')
depends=('glibc')
source=(https://xorg.freedesktop.org/releases/individual/lib/${pkgname}-${pkgver}.tar.bz2
        #https://cairographics.org/releases/${pkgname}-${pkgver}.tar.gz.sha1.asc
)
sha1sums=('06587395f4a3538bafc0845ac225ea4c6472e550')
#validpgpkeys=('') # Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

build() {
  cd $pkgname-$pkgver
  ./configure --prefix=/usr --disable-static
  make
#  arch-meson ${pkgbase}-$pkgver build \
#    -D loongson-mmi=disabled \
#    -D vmx=disabled \
#    -D arm-simd=disabled \
#    -D arm-neon=disabled
#  ninja -C build
}

check() {
  cd $pkgname-$pkgver
  make check
#  ninja -C build check
}

package() {
  cd $pkgname-$pkgver
  make DESTDIR="${pkgdir}" install
  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/"
# DESTDIR="${pkgdir}" ninja -C build install
}
