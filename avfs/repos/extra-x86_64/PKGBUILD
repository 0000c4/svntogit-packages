# $Id$
# Maintainer: Kevin Piche <kevin@archlinux.org>
# Contributor: K. Piche <kpiche@rogers.com>

pkgname=avfs
pkgver=1.0.0
pkgrel=1
pkgdesc="A virtual filesystem that allows browsing of compressed files"
arch=('i686' 'x86_64')
license=('GPL')
url="http://avf.sourceforge.net/"
source=("http://downloads.sourceforge.net/sourceforge/avf/${pkgname}-${pkgver}.tar.bz2"
        'avfs-1.0.0-fix_open_missing_mode.patch')
options=(!emptydirs !libtool)
depends=('fuse' 'xz' 'perl')
md5sums=('c58421e4f294125895f2c6653a7366a7'
         'bdd84b179a869bc6d64529a64a640fc6')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch -Np1 -i "${srcdir}/avfs-1.0.0-fix_open_missing_mode.patch"

  ./configure --prefix=/usr \
              --enable-library \
              --enable-fuse \
              --disable-static
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make DESTDIR="${pkgdir}" install
}
