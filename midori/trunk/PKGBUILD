# $Id: PKGBUILD,v 1.3 2008/08/09 00:33:04 BaSh Exp $
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Contributor: rabyte <rabyte.at.gmail.dot.com>
# Contributor: Johannes Krampf <wuischke.at.amule.dot.org>

pkgname=midori
pkgver=0.1.5
_gitdate=20090306
pkgrel=0.1
pkgdesc="A lightweight web browser based on Gtk WebKit"
arch=('i686' 'x86_64')
url="http://www.twotoasts.de/index.php?/pages/midori_summary.html"
license=('GPL')
install=midori.install
depends=('libwebkit>=1.1.1' 'libidn' 'hicolor-icon-theme' 'desktop-file-utils')
makedepends=('pkgconfig' 'libxml2' 'intltool') # 'gtk-doc' 'git'
source=(#http://goodies.xfce.org/releases/$pkgname/$pkgname-$pkgver.tar.bz2
	midori-${_gitdate}.tar.bz2
)

build() {
  # get git code
  cd ${srcdir}
#  git clone -v git://git.xfce.org/kalikiana/midori
#  cd midori
#  git archive --prefix=midori-${_gitdate}/ --format=tar HEAD | bzip2 > ../../midori-${_gitdate}.tar.bz2
#  return 1

#  cd ${srcdir}/${pkgname}-${pkgver}
  cd ${srcdir}/${pkgname}-${_gitdate}
  ./configure --prefix=/usr --jobs=${MAKEFLAGS/-j/} \
	--enable-libidn \
	--enable-libsoup \
	--enable-sqlite \
	--enable-addons \
	--disable-hildon \
	--disable-unique \
	--enable-nls \
	--enable-docs # --enable-apidocs - currently broken 
	#--enable-userdocs would require docutils from community
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
