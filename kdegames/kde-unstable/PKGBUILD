# $Id$
# Maintainer: Pierre Schmitz <pierre@archlinux.de>

pkgbase=kdegames
pkgname=('kdegames-bomber'
         'kdegames-bovo'
         'kdegames-kapman'
         'kdegames-katomic'
         'kdegames-kbattleship'
         'kdegames-kblackbox'
         'kdegames-kblocks'
         'kdegames-kbounce'
         'kdegames-kbreakout'
         'kdegames-kdiamond'
         'kdegames-kfourinline'
         'kdegames-kgoldrunner'
         'kdegames-killbots'
         'kdegames-kiriki'
         'kdegames-kjumpingcube'
         'kdegames-klines'
         'kdegames-kmahjongg'
         'kdegames-kmines'
         'kdegames-knetwalk'
         'kdegames-kolf'
         'kdegames-kollision'
         'kdegames-konquest'
         'kdegames-kpat'
         'kdegames-kreversi'
         'kdegames-ksame'
         'kdegames-kshisen'
         'kdegames-ksirk'
         'kdegames-kspaceduel'
         'kdegames-ksquares'
         'kdegames-ksudoku'
         'kdegames-ktron'
         'kdegames-ktuberling'
         'kdegames-kubrick'
         'kdegames-libkdegames'
         'kdegames-libkmahjongg'
         'kdegames-lskat')
pkgver=4.2.90
pkgrel=2
arch=('i686' 'x86_64')
url='http://www.kde.org'
license=('GPL' 'LGPL' 'FDL')
groups=('kde' 'kdegames')
makedepends=('pkgconfig' 'cmake' 'automoc4' 'kdelibs' 'kdebase-runtime' 'qca' 'ggz-client-libs')
source=("http://download.kde.org/unstable/${pkgver}/src/${pkgbase}-${pkgver}.tar.bz2")
md5sums=('437c98d4ce6da16d8a18974221669e68')

build() {
	cd $srcdir
	mkdir build
	cd build
	cmake ../${pkgbase}-${pkgver} \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_RPATH=ON \
		-DCMAKE_{SHARED,MODULE,EXE}_LINKER_FLAGS='-Wl,--no-undefined -Wl,--as-needed' \
		-DCMAKE_INSTALL_PREFIX=/usr
	make
}

package_kdegames-bomber() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/bomber
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/bomber
	make DESTDIR=$pkgdir install
}

package_kdegames-bovo() {
	pkgdesc='Five-in-a-row Board Game.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/bovo
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/bovo
	make DESTDIR=$pkgdir install
}

package_kdegames-kapman() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kapman
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kapman
	make DESTDIR=$pkgdir install
}

package_kdegames-katomic() {
	pkgdesc='Build complex atoms with a minimal amount of moves.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/katomic
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/katomic
	make DESTDIR=$pkgdir install
}

package_kdegames-kbattleship() {
	pkgdesc='Sink battleship of your opponents, with built-in game server.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kbattleship
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kbattleship
	make DESTDIR=$pkgdir install
	install -D -m644 $srcdir/${pkgbase}-${pkgver}/kbattleship/src/module.dsc $pkgdir/usr/share/ggz/kbattleship.dsc
}

package_kdegames-kblackbox() {
	pkgdesc='Find the balls hidden in the black box by shooting laser beams!'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kblackbox
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kblackbox
	make DESTDIR=$pkgdir install
}

package_kdegames-kblocks() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kblocks
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kblocks
	make DESTDIR=$pkgdir install
}

package_kdegames-kbounce() {
	pkgdesc='Claim areas and do not get disturbed.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kbounce
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kbounce
	make DESTDIR=$pkgdir install
}

package_kdegames-kbreakout() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kbreakout
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kbreakout
	make DESTDIR=$pkgdir install
}

package_kdegames-kdiamond() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kdiamond
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kdiamond
	make DESTDIR=$pkgdir install
}

package_kdegames-kfourinline() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kfourinline
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kfourinline
	make DESTDIR=$pkgdir install
}

package_kdegames-kgoldrunner() {
	pkgdesc='A game of action and puzzle-solving.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kgoldrunner
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kgoldrunner
	make DESTDIR=$pkgdir install
}

package_kdegames-killbots() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/killbots
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/killbots
	make DESTDIR=$pkgdir install
}

package_kdegames-kiriki() {
	pkgdesc='Yahtzee-like Dice Game.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kiriki
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kiriki
	make DESTDIR=$pkgdir install
}

package_kdegames-kjumpingcube() {
	pkgdesc='A tactical game for number-crunchers.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kjumpingcube
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kjumpingcube
	make DESTDIR=$pkgdir install
}

package_kdegames-klines() {
	pkgdesc='Place 5 equal pieces together, but wait, there are 3 new ones.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/klines
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/klines
	make DESTDIR=$pkgdir install
}

package_kdegames-kmahjongg() {
	pkgdesc='A tile laying patience.'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'kdegames-libkmahjongg')
	install='kdegames.install'
	cd $srcdir/build/kmahjongg
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kmahjongg
	make DESTDIR=$pkgdir install
}

package_kdegames-kmines() {
	pkgdesc='The classical mine sweeper.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kmines
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kmines
	make DESTDIR=$pkgdir install
}

package_kdegames-knetwalk() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/knetwalk
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/knetwalk
	make DESTDIR=$pkgdir install
}

package_kdegames-kolf() {
	pkgdesc='A mini golf game.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kolf
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kolf
	make DESTDIR=$pkgdir install
}

package_kdegames-kollision() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kollision
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kollision
	make DESTDIR=$pkgdir install
}

package_kdegames-konquest() {
	pkgdesc='Conquer the planets of your enemy.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/konquest
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/konquest
	make DESTDIR=$pkgdir install
}

package_kdegames-kpat() {
	pkgdesc='Several patience card games.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kpat
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kpat
	make DESTDIR=$pkgdir install
}

package_kdegames-kreversi() {
	pkgdesc='The old reversi board game, also known as Othello.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kreversi
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kreversi
	make DESTDIR=$pkgdir install
	install -D -m644 $srcdir/${pkgbase}-${pkgver}/kreversi/module.dsc $pkgdir/usr/share/ggz/kreversi.dsc
}

package_kdegames-ksame() {
	pkgdesc='Collect pieces of the same color.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/ksame
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ksame
	make DESTDIR=$pkgdir install
}

package_kdegames-kshisen() {
	pkgdesc='Patience game where you take away all pieces.'
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'kdegames-libkmahjongg')
	install='kdegames.install'
	cd $srcdir/build/kshisen
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kshisen
	make DESTDIR=$pkgdir install
}

package_kdegames-ksirk() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames' 'qca')
	install='kdegames.install'
	cd $srcdir/build/ksirk
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ksirk
	make DESTDIR=$pkgdir install
}

package_kdegames-kspaceduel() {
	pkgdesc='Two player game with shooting spaceships flying around a sun.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kspaceduel
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kspaceduel
	make DESTDIR=$pkgdir install
}

package_kdegames-ksquares() {
	pkgdesc='Connect the dots to create squares.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/ksquares
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ksquares
	make DESTDIR=$pkgdir install
	install -D -m644 $srcdir/${pkgbase}-${pkgver}/ksquares/src/module.dsc $pkgdir/usr/share/ggz/ksquares.dsc
}

package_kdegames-ksudoku() {
	pkgdesc='Sudoku game and more.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/ksudoku
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ksudoku
	make DESTDIR=$pkgdir install
}

package_kdegames-ktron() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/ktron
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ktron
	make DESTDIR=$pkgdir install
}

package_kdegames-ktuberling() {
	pkgdesc='Kids game: make your own potato (NO french fries!)'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/ktuberling
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/ktuberling
	make DESTDIR=$pkgdir install
}

package_kdegames-kubrick() {
	pkgdesc=''
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/kubrick
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/kubrick
	make DESTDIR=$pkgdir install
}

package_kdegames-libkdegames() {
	pkgdesc='KDE game library'
	groups=()
	depends=('kdelibs')
	install='kdegames.install'
	cd $srcdir/build/libkdegames
	make DESTDIR=$pkgdir install
}

package_kdegames-libkmahjongg() {
	pkgdesc='Library used for loading and rendering of Mahjongg tilesets.'
	groups=()
	depends=('kdelibs')
	install='kdegames.install'
	cd $srcdir/build/libkmahjongg
	make DESTDIR=$pkgdir install
}

package_kdegames-lskat() {
	pkgdesc='Lieutnant skat.'
	depends=('kdebase-runtime' 'kdegames-libkdegames')
	install='kdegames.install'
	cd $srcdir/build/lskat
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/lskat
	make DESTDIR=$pkgdir install
}

