# $Id$
# Maintainer: Tobias Powalowski <tpowa@archlinux.org>

pkgname=talloc
pkgver=2.0.5
pkgrel=1
pkgdesc="A hierarchical pool based memory allocator with destructors"
arch=(i686 x86_64)
license=('GPL3')
url="http://talloc.samba.org/"
source=(http://samba.org/ftp/${pkgname}/${pkgname}-${pkgver}.tar.gz)
makedepends=('python2')
depends=('glibc')
optdepends=('python2: for python bindings')

build() {
   cd ${srcdir}/${pkgname}-${pkgver}
   sed -i -e 's#python#python2#g' buildtools/bin/waf
   ./configure --prefix=/usr \
   --sysconfdir=/etc/samba \
   --localstatedir=/var \
   --enable-talloc-compat1
   make
}

package() {
   cd ${srcdir}/${pkgname}-${pkgver}
   make DESTDIR=$pkgdir/ install
}
md5sums=('6e3fdfbc43dde8ccba27b6af894b8fb2')
