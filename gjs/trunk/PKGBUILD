# $Id$
# Maintainer: Ionut Biru <ibiru@archlinux.org>
pkgname=gjs
pkgver=0.7.14
pkgrel=2
pkgdesc="Javascript Bindings for GNOME"
arch=('i686' 'x86_64')
url="http://live.gnome.org/Gjs"
license=('GPL')
depends=('cairo' 'dbus-glib' 'gobject-introspection' 'js')
options=('!libtool')
source=(http://download.gnome.org/sources/${pkgname}/0.7/${pkgname}-${pkgver}.tar.bz2
        gjs-0.7.14-js185-backport.patch)
sha256sums=('3af6f449a505c419d4a0e5938737da8d1b9b09b33710cc1ac1edee2eaa86e348'
            'b1fd3b8aa5978c5b60bfe39ce4298e67b9baa190d9cbf1a0ebe47af356197335')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  sed -i 's|python|python2|' scripts/make-tests
  patch -Np1 -i "${srcdir}/gjs-0.7.14-js185-backport.patch"
  autoreconf -fi
  ./configure --prefix=/usr --disable-static
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
