# $Id$
# Maintainer: Ronald van Haren <ronald.archlinux.org>
# Contributor: damir <damir@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=gnuplot
pkgver=4.2.3
pkgrel=3
pkgdesc="Plotting package which outputs to X11, PostScript, PNG, GIF, and others"
arch=('i686' 'x86_64')
url="http://www.gnuplot.info"
license=('custom')
depends=('gd' 'wxgtk' 'cairo')
makedepends=('texinfo' 'emacs')
install=gnuplot.install
source=("http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz")
md5sums=('6b6d22662df5101b308c465a722c43ce')

build() {
  cd $srcdir/$pkgname-$pkgver
  ./configure --prefix=/usr --mandir=/usr/share/man \
              --infodir=/usr/share/info \
              --libexecdir=/usr/bin \
              --with-gihdir=/usr/share/gnuplot \
              --datadir=/usr/share \
              --with-readline=gnu
  make pkglibexecdir=/usr/bin || return 1
  make prefix=$startdir/pkg/usr libexecdir=$startdir/pkg/usr/bin \
       mandir=$startdir/pkg/usr/share/man \
       infodir=$startdir/pkg/usr/share/info \
       pkglibexecdir=$startdir/pkg/usr/bin \
       GIHDIR=$startdir/pkg/usr/share/gnuplot \
       TEXMFLOCAL=$startdir/pkg/usr/share/texmf-dist \
       datadir=$startdir/pkg/usr/share install

  install -Dm644 lisp/dotemacs $pkgdir/usr/share/emacs/site-lisp/dotemacs || return 1
  install -Dm644 Copyright $pkgdir/usr/share/licenses/$pkgname/Copyright || return 1

  rm -f $startdir/pkg/usr/share/texmf-dist/ls-R
}


