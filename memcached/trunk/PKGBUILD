# Maintainer: Dan McGee <dan@archlinux.org>
# Contributor: Michael Irwin <6d6469@gmail.com>

pkgname=memcached
pkgver=1.2.6
pkgrel=3
pkgdesc="A distributed memory object caching system"
arch=(i686 x86_64)
url="http://www.danga.com/memcached/"
license=('GPL')
depends=('libevent')
backup=('etc/conf.d/memcached')
source=(http://www.danga.com/memcached/dist/$pkgname-$pkgver.tar.gz
        memcached.conf
        memcached.sh)
md5sums=('200d22f7ac2d114f74a6904552e9eb70'
         'bf5c601297b42be7baa0a3bcca2d6077'
         '001c5d6dc5d106f5a8aa2fc64525f5ba')

build() {
  cd $startdir/src/$pkgname-$pkgver
  # enable threads needs to be explicit
  ./configure --prefix=/usr --enable-threads
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
  install -D -m 644 $startdir/src/$pkgname.conf \
  	$startdir/pkg/etc/conf.d/$pkgname
  install -D -m 755 $startdir/src/$pkgname.sh \
  	$startdir/pkg/etc/rc.d/$pkgname
}
