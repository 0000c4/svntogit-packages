# $Id$
# Maintainer: Hugo Doria <hugo@archlinux.org>

pkgname=deluge
pkgver=1.0.6
pkgrel=2
pkgdesc="A bittorrent client written with python and pygtk"
arch=('i686' 'x86_64')
url="http://deluge-torrent.org/"
license=('GPL2')
depends=('pygtk' 'boost>=1.36.0' 'pyxdg' 'dbus-python' 'librsvg' 'setuptools')
makedepends=('subversion' 'intltool')
options=('!emptydirs')
source=(http://download.deluge-torrent.org/source/${pkgver}/${pkgname}-${pkgver}.tar.gz shutdown-fix.patch)
md5sums=('96be98b4e7f8c66ec243e8148b897291' 'f4ef4cebca468e4f85f0c10d843c44a7')

build() {

  cd ${srcdir}/${pkgname}-${pkgver}/

  # used to fix a problem with deluge shutdown
  # remove it after 1.0.6 release
  patch -Np1 -i ${srcdir}/shutdown-fix.patch

  cd ${srcdir}/${pkgname}-${pkgver}/
  python setup.py install --prefix=/usr --root=${pkgdir}

  install -D -m644 deluge/data/pixmaps/deluge.svg ${pkgdir}/usr/share/pixmaps/deluge.svg 
}

