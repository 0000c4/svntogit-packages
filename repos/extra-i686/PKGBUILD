# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.6
pkgrel=1
_languages=af,ar,be,bg,bn-IN,ca,cs,cy,da,de,el,en-GB,eo,es-AR,es-ES,et,eu,fi,fr,fy-NL,ga-IE,gl,gu-IN,he,hi-IN,hu,id,is,it,ja,ka,kn,ko,ku,lt,lv,mk,mn,mr,nb-NO,nl,nn-NO,oc,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,te,th,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('d35927f0e6d5b006e39c88f992f18e33'
         'dfad57ac5c2d855c4f7560026d238767'
         '9db8621caf8fd125ddf3ff5b8c7f5095'
         'ae7f8f3cf75ce2f0ba200f22fe706a3a'
         '151448f2c79c9f12654e4b360c7b527f'
         'b1e59fca2ee3806571a20cab214fdc42'
         '0d617cac40b6444ee17d3d26a34dfbe6'
         'c9d0e54e6f1a30f781a5a72ed69f7640'
         'ddde1ec445998c71917be64c7c653a27'
         'f6652e7e1bc912210936526a1373d9e5'
         '65b6a2e215f1354fc63cdc867ab347c5'
         'a92d8b23d53277d93738c01e3403fe8f'
         'e2b6eb39c56685ee5075ec727cf9c7a9'
         'ba7e5b04539c9963415cf1a0b3eac696'
         'e90119d61f390f8cd7824f192a551391'
         'e06aa69b536f62c843d2f5be2624c898'
         '92adc606a8b48feb4dc89e7ea1457ffc'
         '1fa25403064fd12cf9ce9bff5aacd717'
         '3f9bcc1e96c58a55e66a02ca90415353'
         '8524d73d6035faf18f4d96c359601cdc'
         '248a5d54749a5ffa9d1f644e960eab0d'
         'ca93b134b3a7a9bcab277380ed85cddf'
         'd440bff46464869e117765eeb90e4d47'
         '78b3590a81507c933eff66e77cc5a967'
         '62e7c547386937e04ad28df86019f8d3'
         '0ab477d742d0601af86d9610623a8434'
         '7e0bd3a6719bfc646ec98682ed0a6fa9'
         '443ac55c9ab6b27e69242b5c1986d43d'
         'ee91a663cef6e81450b15c0cc17aa15f'
         'd7aff5ba756896df884f1a8947fb38d1'
         'ba1be0f55322c1e7b962faa385995e0a'
         '7982690079c71a64132c01a4c41ec9c1'
         '6e27e355fc4723ac2eb3070c13438440'
         'cfa05ef46aad4e6d831304f7eeabb1a1'
         '8618385ea317a41369c06bff6d9ca17c'
         '75d84471ac16054c1dc1a25eb6c2fdf9'
         'b81b96e777cc3619a8d8552db3f3ed83'
         '60f64f2399ad242933f351c9f0b00472'
         '80475d3848017917d58aa48b807b1983'
         'd0fe3a970c87dc5bff51dd7ccff079d3'
         '2c6ee8728c796086014af92d32e9e53e'
         'c926b54ee795c78587e5625446516680'
         '2b4e8515e3e0bf0b4bbd7b024e8e4949'
         'ea2c81c3b157c1ce65b4511d61eeab44'
         'f2b7b4b26d647a142f9e13eaaeea0127'
         'ca82a28a050332e94c810e25160a909a'
         '96dfca2e4e3005c89a6a06641d5ddf05'
         'b46142d598a0e8afe8f02142e409d812'
         '7064e97a39462679a04c5e73f7f8a848'
         'f6340f910b1095b6c27452d348da0a25'
         '05b260e25c7a73ed8325b269d83d77f5'
         'ca4d053250771fad0f5c783ef8565a7b'
         '9fd207955d14a7b978109940839b36e3'
         'abfc869c8170c48bcaeb4ee4e6433a7e'
         '668cef8a57a6fdbef7fa2451d3a9834f'
         '3e82f03466152850d09f96ef8ea85255'
         '10ff4141376b7ce70a083526667b6340'
         '2cb4b2f447dde48074212755767ac3d4'
         '3ccb0250692610140e20157596d799a9'
         '4d3d3559a90d9529dade53484e2c3ee1'
         'a31a21077958af04b691b3f35941bee4')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.manifest || return 1
  done
}
