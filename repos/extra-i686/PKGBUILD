# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.4
pkgrel=1
_languages=af,ar,be,bg,bn-IN,ca,cs,cy,da,de,el,en-GB,eo,es-AR,es-ES,et,eu,fi,fr,fy-NL,ga-IE,gl,gu-IN,he,hi-IN,hu,id,is,it,ja,ka,kn,ko,ku,lt,lv,mk,mn,mr,nb-NO,nl,nn-NO,oc,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,te,th,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('35840eae4f62c50c4f32357f68558406'
         'da6434c70926edc852e678218fbdf087'
         '9b9c8215ad5a3d68dd378372b9247d3f'
         'ddc7d8eef97e48eba392d942ddcc2177'
         '2b72b77eb2d5afd9f23c09748c534f0e'
         'a0f0f0ad0ef579285b056678b2a47a53'
         '85f386907a936a8f0faa0204184c7d54'
         'cbe93db4f180a5d92654d8fda8c816fc'
         '3abf79239ecc072f265d5e0e7959f1a2'
         '94fb530a095b32d94c9f59c403d9e470'
         '15eb448a69fa1db6602c8e656b9fb152'
         'ccda688be6723114392ee209d6b42de4'
         'eaaae3479f177527bdc1ad479778f365'
         '61bb06ae2bc1cc640e987e3592002558'
         'c4d6bf22ea2ddcb1c007631781296b53'
         'a054820fd7c1cc77353543232966abe0'
         'ce23c348b52c9d67465aaa4503ea9ae1'
         '0b996e530820d9a7b2627c1e7720b3aa'
         'b6bd08a60848c7bc37c24677ef08547f'
         'ead4eb0176df7511e4cd9b6ee57dcaab'
         '1bd48544e222f630d740a6a0d6c6c9d8'
         '480ef288926929fccbd5185642e1b111'
         'f1ac2e42b131339c6e68ed029123d6e0'
         '5e0fe24e59dd49adafe90c7d91fa94af'
         'd2b204fbd888918fd61cff3d2065a7e0'
         '54f6d10498794428f97fa4e084a03a16'
         'ec2cbaee327fabc70325b1ed55847d5c'
         '559c9985868e28037e42c8a8e044dca0'
         '34c9119de1999b8f9225e12ecb67503f'
         'fad60e88f34579c89c7189108f58b3a2'
         'bbd7dfcce3b7bb8c30194299db08e843'
         '9fbc26a1d61f2959e4ee25ea5be9fa12'
         '28ae115bc8879fefab2172581880c807'
         '2f1b5c0b30567cd40ad8cd1ec0183ad5'
         'c3ce44b7445b4f559ad4615c4e0a1226'
         'ce01586d877e042f285e21827ac6f6bf'
         'd9570c2adf21563b5bb18cacc4d35373'
         '338b99c25d30d602e5eef2982bfd53f5'
         '7ab866da9a2a5ae3a380d546d88db1a9'
         '0dcdaf39ae155e420fc116ad6f1ae82c'
         '65352294d95f1676989337ff84468000'
         '4b460a3d73a03f0744e42d4a6c2791bf'
         'e189c79933aa6782f0a7b966fa276c29'
         'bcf60e203434cd07b7c626dd6416b041'
         'b1ed21e60c3ed9b2806ba6faf5a01ef2'
         '29c672886aa9ca41428ba04196938545'
         'c9d3a2094571c00a39690ceeb9e07401'
         'f5b1650344d731d7b9e3488f29625d6e'
         '720bb58b8de04f4929ca878a181c43b3'
         '25b841dc7d7e193ee950994d37a798f4'
         '710e42ba8d86c107cad621ee2c87414b'
         '765c2262eda5b27f906017796a9e5666'
         'a8f44286eb939f1a2723bd8a8a477387'
         '8adef207031819a634aad0bfd896a829'
         '33d96f4b556823c7dbe4fbf992e03e9c'
         '1a655cd48d3d7b768399844024e89ae1'
         '01bc19423a6b21cfc14be45e08eb6503'
         '24fdbb94e32f9ed435b3168ae49b9691'
         'b23bfbb14a53da68081af53e1930cc9a'
         '85d1456b1ce02370a4e30b98476c2e6f'
         'ebb0cf625b3763eae5af23d89ee5c532')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.manifest || return 1
  done
}
