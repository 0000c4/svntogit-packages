# $Id$
# Maintainer: Hugo Doria <hugo@archlinux.org>

pkgname=deluge
pkgver=1.0.6
pkgrel=1
pkgdesc="A bittorrent client written with python and pygtk"
arch=('i686' 'x86_64')
url="http://deluge-torrent.org/"
license=('GPL2')
depends=('pygtk' 'boost>=1.36.0' 'pyxdg' 'dbus-python' 'librsvg' 'setuptools')
makedepends=('subversion' 'intltool')
source=(http://download.deluge-torrent.org/source/${pkgver}/${pkgname}-${pkgver}.tar.gz shutdown-fix.patch)
md5sums=('96be98b4e7f8c66ec243e8148b897291' 'bf3a4c0b246a1dadcf6c05b37a7deded')
options=('!emptydirs')

build() {

  cd ${srcdir}/${pkgname}-${pkgver}/${pkgname}

  # used to fix a problem with deluge shutdown
  # remove it after 1.0.6 release
  patch -Np0 -i ${srcdir}/shutdown-fix.patch

  cd ${srcdir}/${pkgname}-${pkgver}/
  sed -i 's|boost_thread|boost_thread-mt|' setup.py
  python setup.py install --prefix=/usr --root=${pkgdir}

  install -D -m644 deluge/data/pixmaps/deluge.svg ${pkgdir}/usr/share/pixmaps/deluge.svg 
}

