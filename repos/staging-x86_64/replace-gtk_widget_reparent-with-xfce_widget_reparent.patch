From fbb87f2f1b779182a8802e091ff4fb1175b47326 Mon Sep 17 00:00:00 2001
From: Andre Miranda <andreldm@xfce.org>
Date: Sun, 14 Jan 2018 16:25:26 -0300
Subject: Replace gtk_widget_reparent with xfce_widget_reparent

Requires libxfce4ui >=4.13.2
---
 configure.ac                 | 2 +-
 thunar/thunar-progress-dialog.c | 6 ++++--
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/configure.ac b/configure.ac
index 9bc80ce..c2d6a80 100644
--- a/configure.ac
+++ b/configure.ac
@@ -153,7 +153,7 @@ XDT_CHECK_PACKAGE([GMODULE], [gmodule-2.0], [2.30.0])
 XDT_CHECK_PACKAGE([GTK], [gtk+-3.0], [3.22.0])
 XDT_CHECK_PACKAGE([GDK_PIXBUF], [gdk-pixbuf-2.0], [2.14.0])
 XDT_CHECK_PACKAGE([LIBXFCE4UTIL], [libxfce4util-1.0], [4.12.0])
-XDT_CHECK_PACKAGE([LIBXFCE4UI], [libxfce4ui-2], [4.12.0])
+XDT_CHECK_PACKAGE([LIBXFCE4UI], [libxfce4ui-2], [4.13.2])
 XDT_CHECK_PACKAGE([XFCONF], [libxfconf-0], [4.12.0])
 
 dnl ******************************
diff --git a/thunar/thunar-progress-dialog.c b/thunar/thunar-progress-dialog.c
index 1a87a38..8ecee40 100644
--- a/thunar/thunar-progress-dialog.c
+++ b/thunar/thunar-progress-dialog.c
@@ -24,6 +24,8 @@
 
 #include <gtk/gtk.h>
 
+#include <libxfce4ui/libxfce4ui.h>
+
 #include <thunar/thunar-private.h>
 #include <thunar/thunar-progress-dialog.h>
 #include <thunar/thunar-progress-view.h>
@@ -253,7 +255,7 @@ thunar_progress_dialog_job_finished (ThunarProgressDialog *dialog,
   if (n_views == SCROLLVIEW_THRESHOLD-1)
     {
       /* reparent the content box */
-      gtk_widget_reparent (dialog->content_box, dialog->vbox);
+      xfce_widget_reparent (dialog->content_box, dialog->vbox);
 
       /* destroy the scroll win */
       gtk_widget_destroy (dialog->scrollwin);
@@ -366,7 +368,7 @@ thunar_progress_dialog_add_job (ThunarProgressDialog *dialog,
       gtk_widget_show (viewport);
 
       /* move the content box into the viewport */
-      gtk_widget_reparent (dialog->content_box, viewport);
+      xfce_widget_reparent (dialog->content_box, viewport);
     }
 
   g_signal_connect_swapped (view, "need-attention",
-- 
cgit v1.1

