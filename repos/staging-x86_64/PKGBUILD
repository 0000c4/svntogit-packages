# $Id$
# Maintainer: AndyRTR <andyrtr@archlinux.org>
# Contributor: Thomas Arnhold <thomas at arnhold dot org>

pkgname=liborcus
pkgver=0.10.99
pkgrel=1 # da946ed8908550cb5fe281055dcff46c1aefebab
pkgdesc="File import filter library for spreadsheet documents."
arch=('i686' 'x86_64')
url="https://gitlab.com/orcus/orcus/blob/master/README.md"
license=('MPL')
depends=('libixion')
makedepends=('boost' 'mdds')
source=(#http://kohei.us/files/orcus/src/${pkgname}-${pkgver}.tar.xz
        https://gitlab.com/orcus/orcus/repository/archive.tar.bz2?ref=da946ed8908550cb5fe281055dcff46c1aefebab
        mdds-1.0.patch)
#sha1sums=('skip'
#          '40061fbd6276f8760ab63e136bc304f9e1a88f2a')
sha1sums=('20e326484faa8614d9f09ed083bc942164550ae0'
          '40061fbd6276f8760ab63e136bc304f9e1a88f2a')

prepare() {
#    cd ${pkgname}-${pkgver}
    cd orcus*
#    patch -Np1 -i ../mdds-1.0.patch
    autoreconf -vi
}

build() {
    #cd ${pkgname}-${pkgver}
    cd orcus*
    ./configure --prefix=/usr
    make
}

check() {
    #cd ${pkgname}-${pkgver}
    cd orcus*
    make -k check
}

package() {
    #cd ${pkgname}-${pkgver}
    cd orcus*
    make DESTDIR=$pkgdir install
}
