# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.3
pkgrel=1
_languages=af,ar,be,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,fy-NL,ga-IE,gu-IN,he,hu,id,it,ja,ka,ko,ku,lt,mk,mn,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('9c8f1cbd57f1cc58d66cedb7a2daf88a'
         '840bd0f2db9f9183c789ac5c89a10e26'
         '43de21ac74d2e56cd3088aa2b8a69281'
         '29c059dc2fd5a404e8a0f66e70929b87'
         'e7588783acf41a372778cf18c3d9fb66'
         '6d07f1615107b280364118a0685150f5'
         'aabd4cf360a30fc537373f0f69dc397e'
         'a4eea199ecb47992afb0d719d7267621'
         'bf53172b62b0b512cdb0abcc6cb9608e'
         '99a10505f60c3a79ce3a5df6711367bc'
         'efe96cdf843ab3003b042b6d3fbe1b9f'
         '8018b31f586983bda3ec64e10ccdf9be'
         'b62bcda72969f51e417dd59bb327d4f6'
         '6fe19500fa68055a95a0a4d8ecd11518'
         'e0cad8fe9f07c46635b297bd5a9c4247'
         'b8b0da0a9df25070284475544773b7ac'
         '081d445264916fa66e979b1ce9894377'
         '43acc6064626d42f52f66c72f5dfb0a3'
         '84e88c6663215ee2743fa842949892ea'
         'a0bc99a58571b8999ac683f80c27dcc9'
         'd63855a7a9d25eb353a756cbd7f388f8'
         'c5cd0b627108396e53c6db5e757b0617'
         '8dbc2b71b26d2adcb85edb61b3a64cb5'
         '1bf59623693d8616c40109d84bc39624'
         '93ae7e984e1afed5acf8466148a97e70'
         '376a94c1ef0bc6bef358dd0d05a142b2'
         'a67c5ee7a5822543b31ad795401ec2c6'
         '52a4b5f0dad77a2fd970a6b2697aca66'
         'd678ddc543469bcb998f84e08b87768f'
         '3c61a97eecb6fe7cfb19f74e1482d607'
         '9691e65fc6b4b1578bad1365fbe159d3'
         '81d98257b3c803f266b8033212490306'
         'f69e6d759f432e52e69f9832bab634b8'
         '7b1d75850e2e0d80a0aea96481fb4515'
         'bd9453a5fa3b6fb09cb2d4f4b65fa169'
         '00fbe8fdb902b263ca106595f015ce17'
         '311f31c3ce4a3494b2a440754f48eee2'
         'ae3bd26648acd04aea1bb7149d9c1036'
         '9a2d06ef729b394e26ffe50c05c608cd'
         'ea1e52bc4ab6ba535e7abd5c213b206b'
         '08e22d9ce0d351a0b8e9aa241b5d179a'
         'd11c13d2b12f4a7b2245a85f60bc5b07'
         'deb019742364326769e8b7e19e48aed5'
         '4bb20d21ed2798a7faaf6e80a17e34da'
         '96029bf1ded991d02dd9a88fa256bfeb'
         '563ee47baad4a5911149abe51b122406'
         'd712629f1feddcd4a918004b935392c4')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${startdir}/pkg/usr/lib/firefox-${pkgver}/chrome/${lang}.manifest || return 1
  done
}
