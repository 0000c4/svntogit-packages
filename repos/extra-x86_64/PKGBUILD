# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.8
pkgrel=1
_languages=af,ar,be,bg,bn-IN,ca,cs,cy,da,de,el,en-GB,eo,es-AR,es-ES,et,eu,fi,fr,fy-NL,ga-IE,gl,gu-IN,he,hi-IN,hu,id,is,it,ja,ka,kn,ko,ku,lt,lv,mk,mn,mr,nb-NO,nl,nn-NO,oc,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,te,th,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('cdb4b5dc7af5b8c3140f9b9b8962a7d6'
         'b69d63ea2feb104d3710b6dc0aacfeea'
         '28888ce0ea58e9c74e64ebcd310c9b96'
         '4aa5784e380eceb72ad5c654b9578467'
         'c60953494e269c05b45087587852a094'
         '6b74ca502ffee35afc708a9ee8205886'
         '6e37c0092fd891fad4acfd2ef10ab40c'
         'b70b9bddb1150bfba6636f04b10d35c3'
         'a1e78b6ba633b4f240148321939de634'
         '169d874742059da5df9b9586b9e9778e'
         '2964129771a3b3cffe9fc39042546ede'
         '7ccc552852fd1b487630b45b7fa3a3a1'
         '9b099cd337a863623c180c75348c5492'
         '89cd106702bb490b3a24e7912b5d0ac1'
         '0c5c8cc828a4b2992d60380630a87479'
         'b2333c356619f5ee1526426a27812b9e'
         'c1025f7223c2b2727c1f5ce582c52ab0'
         '8cd4b7c3d1ff225bc3d159966a5f38fb'
         '6677c770865e69d87c87fc82387f4215'
         'c009c16af0fc9fe4c751703cd92269e6'
         'c490b88b54b481c425e27cf3e471bf57'
         '381afb2998a8f7529f60198ddea641ab'
         '00324362fa58b9e78b47c2885b732f13'
         'fd9cba25de45d805b4bac8be4caa0dec'
         '29cd030a3e6abaf0b3367770a33ac229'
         '8fdb4e7c194cc2f73a42b02088036c96'
         '25ec3987eea18e6f2f8958e7c269f36f'
         '05a636ffc56a0c8e5648f6e94a5d5303'
         'b5be6198617077b867b54f29b4c63d24'
         '38bc382e01d9c57884c57d2ea9a43e02'
         '3734b12813aecc6467bd8449c4ae9a76'
         '1f5a6359379983ac3d365189e4183dfe'
         'f9e18a6a1769bca61a7526f18dcb72c6'
         'a8dae79a89f4be689602d95e789d3ebe'
         'd34e8083b6b2bef1edf9a43768cbcb68'
         '3159018e260bbda7fda699ed22a926e4'
         '6d0003df2aa7074ea7dcb256120f6391'
         'f0d20cd159474a956e6396943da462a9'
         '89ef0179ea8458141f9d4a1c237eafff'
         '3cb8e1789dee58c0a1f349a0e99ea60d'
         '9e0b0532d5ea0fd4b6b1bd4d3bbfdf56'
         'df6a9c378cdc6ebd2c4964a06563e78b'
         '57279fdb44fd5ac3368c6830d33e4f1d'
         '55c779e3f7abc0e4730002a0cc0897b5'
         '3bee0a624aa0ed95e0e8121066390ef1'
         '75b55b1b48febad96b87c636dae9dc1d'
         '0502248822e57327b08467fc70a8ef81'
         '31e1bacd1ac5c0f208be6201f0f31516'
         '56bf6203342d2c66e0351900ac4626a7'
         '84aed62f92a135648706f185397196b2'
         'd1fdc7b1fd62b2ddf4b7b05642df4e78'
         '4d0c91b0eff971fdfc7ea03dc5fc6a32'
         'd2bf4794e464d8939de75a576b64566a'
         '85026d4def84e0cf3f888e36de657f7a'
         'b3a690ef966a34c7442a6edaa90940d2'
         '68e4355455bcdb1cbec0a8bb308991ed'
         'd87c0b371a1d98d96ea671430e182804'
         'd41cce07d1aab1b0b18cb4c037176e85'
         'cdfdf8bb880b246035d708005a6eade8'
         'c26518e9ae1bbeded5a6132c48da6224'
         '56e9282380cc27b9e4b46ce5a6f57fd6')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.manifest || return 1
  done
}
