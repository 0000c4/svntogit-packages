# $Id$
# Maintainer: Alexander Baldeck <alexander@archlinux.org>
# Contributor: Jan de Groot <jgc@archlinux.org>
pkgname=xorg-xinit
pkgver=1.1.0
pkgrel=1
pkgdesc="X.Org initialisation program "
arch=(i686 x86_64)
license=('GPL')
url="http://xorg.freedesktop.org/"
depends=('libx11' 'xorg-xauth')
makedepends=('pkgconfig')
backup=('etc/skel/.xinitrc'
	'etc/skel/.xsession'
	'etc/X11/xinit/xserverrc'
	'etc/X11/xinit/xinitrc')
groups=('xorg')
source=(${url}/releases/individual/app/xinit-${pkgver}.tar.bz2
	xinitrc
	xsession
	xserverrc)
options=(!emptydirs)
md5sums=('9144097186c3d2454beffe8ac3b53c6e'
         'f165d9a52284ef8cd4c8a129463a2b49'
         '7873d97db30d6c279ed37e3559e7c59d'
         'bb550d3b9a2d2b6cbe6e2667a3a7cd03')

build() {
  cd ${startdir}/src/xinit-${pkgver}
  ./configure --prefix=/usr
  make XINITDIR=/etc/X11/xinit || return 1
  make XINITDIR=/etc/X11/xinit DESTDIR=${startdir}/pkg install || return 1

  install -m755 -d ${pkgdir}/etc/skel
  install -m755 -d ${pkgdir}/etc/X11/xinit
  install -m755 ${srcdir}/xinitrc ${pkgdir}/etc/skel/.xinitrc || return 1
  install -m755 ${srcdir}/xsession ${pkgdir}/etc/skel/.xsession || return 1
  install -m755 ${srcdir}/xserverrc ${pkgdir}/etc/X11/xinit/xserverrc
}
