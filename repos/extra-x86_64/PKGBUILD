# $Id$
# Maintainer: damir <damir@archlinux.org>

pkgname=avidemux
pkgver=2.4.3
pkgrel=1
pkgdesc="A graphical tool to edit video (filter/re-encode/split)"
arch=("i686" "x86_64")
license=('GPL')
url="http://fixounet.free.fr/avidemux/"
depends=('libxv' 'libvorbis' 'libxml2' 'gtk2>=2.10' 'alsa-lib' 'lame' 'xvidcore' 'faad2>=2.6.1' 'faac' 'sdl' 'x264>=20080625')
makedepends=('cmake')
options=('!makeflags')
source=("http://download.berlios.de/avidemux/${pkgname}_$pkgver.tar.gz"  "avidemux.desktop")
md5sums=('ff8e6ac186321e7e8bec9f8177df3724' 'a9cf864c209782307afda5bc6a33a0cd')

build() {
  cd $startdir/src/${pkgname}_$pkgver
  mkdir build
  cd build
  cmake -D CMAKE_INSTALL_PREFIX=/usr -D CMAKE_BUILD_TYPE=Release .. || return 1
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # freedesktop thingies
  install -Dm644 ../avidemux_icon.png ${startdir}/pkg/usr/share/pixmaps/avidemux.png
  install -Dm644 $startdir/src/$pkgname.desktop $startdir/pkg/usr/share/applications/avidemux.desktop
}
