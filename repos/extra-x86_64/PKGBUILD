# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>
# Contributor: Michal Hybner <dta081@gmail.com>
pkgname=firefox-i18n
pkgver=3.0.5
pkgrel=1
_languages=af,ar,be,bg,bn-IN,ca,cs,cy,da,de,el,en-GB,eo,es-AR,es-ES,et,eu,fi,fr,fy-NL,ga-IE,gl,gu-IN,he,hi-IN,hu,id,is,it,ja,ka,kn,ko,ku,lt,lv,mk,mn,mr,nb-NO,nl,nn-NO,oc,pa-IN,pl,pt-BR,pt-PT,ro,ru,si,sk,sl,sq,sr,sv-SE,te,th,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Firefox"
arch=(i686 x86_64)
license=('MPL')
url="http://www.mozilla.com/"
depends=("firefox>=${pkgver}")
eval conflicts=(mozilla-firefox-i18n mozilla-firefox-{${_languages}} firefox-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('a95495da07c3831e02e46657391ab2b7'
         'c00401e8d9e6fab7a14f25b5b7bc00de'
         '72c3e21c975f6c123333a89297a94f18'
         '6cfd948b20af272717c3d455a40aece1'
         '5ac61e984ee3bf66c5602b66a126d5e7'
         '2f07344aa1c82ef333b4c2e8f85e4bb5'
         'e26efec3e8dace92f26226eaed4735af'
         'd2ed4156dd2afbb3ed316f6cc5a33f83'
         '0cc735eefa89bd136c4d44f5ee441d1e'
         '4ef9d16b9c8efdfc55e9a908a11ca8f7'
         'e4c3ea55c95aee7e832b89b39c185618'
         'dc83b38f5ae3de9a07e8ebadb1b5759e'
         '44a2a72eebf0aa3718d4d3117c28843c'
         'ae34f4e6846612834efb057dd9b1a745'
         '49c588c089e4d28d0dfc92a0e19182e0'
         'f6ea7778e1c465e6ea87bb511cdd2f17'
         '3c9fc0d80b72622cfb62d0464ef9b329'
         '5f3181ec9eba2aa29e256928842b0a47'
         'c328ecdca8eeb71a6b730f36284ef68f'
         'ea9a474b1c58fa66c4a0fcbd005d9645'
         'a8e3830158fdc20aacff6779e2655c6e'
         'c1a4827e544cbf424500b9f14f265ea9'
         '404ef7d8b1b2f2df562cbd7ffd51882e'
         '0e44997fd0cb844bdb1f4d878b9ceaf0'
         '2863037df0105ec61352a5b1e7bea5ba'
         '6b6b56d306f2bfbd2eaff383d76bb1f9'
         '0d854b7e40583f8846290297c8270933'
         'f95a1860325048fd0632045b3b7cc294'
         '25eb699f7c6d996747b5820c8732b67a'
         'e6c91b9fee9e62dc3fe185dbc733e9cb'
         'f6e31dbe777cf563e5340fc118fda527'
         'd5ae859c31c3efe60b61086cc5b8aec0'
         '59302047e124d692ef93ca7568abe0a2'
         'd2052817f495873f775ab65058a53f1f'
         '033b3b5fcaf31b7d42dcdaf7397b854f'
         'e4eb3b2465a97e77d6ff80d3e4f984eb'
         'ce1b981bbbc193c8c9f37ed7f8c9b663'
         'b81e8af5852f103ddedd60a06adcbd5c'
         '751d19ab79ced6b85e36911ef0c0279b'
         '448268b820d7c97fd09392bd1969c463'
         'd3ba2623f102d4c43605e55d7963ebac'
         '7f736e3fddd81b79e8005322ba950754'
         'ac45a61f7745c4010b90f905561908e2'
         'e3bbadb5f7d498e968dc3f167d194cf6'
         '2a7c392244c50aaba8cd8c89bea485b4'
         '4f8e680f43b6fa97e3cf32c6009ca2fb'
         '22ea77ad0ae392b23f0ff3c26eb51779'
         '15315d2e6fb69aef4e1c132d8fd81298'
         '01b7791ae4a6b2292e960b390088567e'
         '6f41157ae82bff75949d4d07e5805193'
         'ab0190aa209f319df665c5ac0fe46561'
         '637cb959e9cbac5621cd5bcf1217b402'
         '5db8f7225f75c78328862d824c645ddf'
         '784476b9346d80e79e853471cbde327f'
         '4cba2858a9a316ac2514d8f5d39175f8'
         '4cec25322abee08541a522795ea27dd9'
         '837ec19aedc294473fe1eb5ba0bd39bd'
         '9277490d85efd41e56e0fc41a495bedd'
         '64fcd35b5f210bee98db4137808d0fda'
         '8e2bd0b8e551b4d3f6e1cc246ca6cac2'
         '9784b3e8d27b919bbd0050ec947fe50c')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/firefox-3.0/chrome/${lang}.manifest || return 1
  done
}
