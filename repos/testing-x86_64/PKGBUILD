# $Id$
# Maintainer: Ronald van Haren <ronald.archlinux.org>
# Contributor: Damir Perisa <damir.perisa@bluewin.ch>

pkgname=stellarium
pkgver=0.10.2
pkgrel=4
pkgdesc="A stellarium with great graphics and a nice database of sky-objects"
arch=("i686" "x86_64")
url="http://stellarium.free.fr/"
license=('GPL2')
depends=('libpng' 'mesa' 'libgl' 'freetype2' 'qt>=4.5.1' 'openssl')
makedepends=('cmake' 'boost')
source=("http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz" \
	'stellarium.desktop' 'stellarium.png' libpng14.patch)
md5sums=('c544fff9e75e9317055075b658ae5924' 'b4f9ebd082c4e112c2bbfac9f2c8465d'\
         '134ab08e73f4f5d995a7931a7957b7a3' '15864ddcc1f26e3cfe38aaf267681b5e')
sha1sums=('aa24cbb8d4a911121108df67483b4c753402928e' 'c9cc79212542238227b5bd6af99f60fe056f4ab2'\
         'b890d3b6c4dcfcfcc696514202af11b2a50c0fea' '0ce37d370f3c6ab67c1b863e309bd1ba86183c63')
	
build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -p1 < ../libpng14.patch || return 1
  cmake . -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=RELEASE || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1

  # install desktop file & pixmap
  install -Dm644 ${srcdir}/stellarium.desktop \
	${pkgdir}/usr/share/applications/stellarium.desktop || return 1
  install -Dm644 ${srcdir}/stellarium.png \
	${pkgdir}/usr/share/pixmaps/stellarium.png || return 1
}


