# $Id$
# Maintainer: Tobias Powalowski <tpowa@archlinux.org>
# Contributor: Francois Charette <francois.archlinux.org> 

pkgname=redland
pkgver=1.0.10
pkgrel=2
pkgdesc="Library that provides a high-level interface to RDF data"
url="http://librdf.org/"
license=('GPL')
arch=('i686' 'x86_64')
depends=('postgresql-libs' 'libmysqlclient' 'sqlite3' 'rasqal' 'libiodbc' 'libtool')
makedepends=('pkgconfig' 'gtk-doc')
# we need librdf.la
#options=('!libtool')
source=(http://download.librdf.org/source/$pkgname-$pkgver.tar.gz
	'librdf_storage_register_factory.patch')
md5sums=('bdbb9b8dc614fc09a14cd646079619e1'
         '4562101ac0bbee19488cf34cec7923f1')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  # Fix librdf_storage_virtuoso.so
  patch -Np1 -i ${srcdir}/librdf_storage_register_factory.patch || return 1
  sed -i -e '/SHAVE/d' configure.ac
  autoreconf

  ./configure --prefix=/usr \
    --without-threads
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
