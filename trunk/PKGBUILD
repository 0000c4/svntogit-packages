# $Id$
# Maintainer: aurelien <aurelien@archlinux.org>

pkgname=xfwm4
pkgver=4.4.2
pkgrel=3
pkgdesc="Xfce window manager, compatible with Gnome, Gnome2, KDE2, and KDE3"
arch=(i686 x86_64)
license=('GPL2')
url="http://www.xfce.org/"
groups=('xfce4')
depends=('libxfcegui4>=4.4.2' 'libxfce4mcs>=4.4.2' 'libxdamage' 'libxpm' \
         'libxcomposite' 'libxext' 'librsvg')
makedepends=('xfce-mcs-manager' 'pkgconfig')
options=('!libtool')
install=${pkgname}.install
source=(http://www.xfce.org/archive/xfce-${pkgver}/src/${pkgname}-${pkgver}.tar.bz2
        ftp://ftp.archlinux.org/other/xfce4-graphics/ArchLinux-xfce4-xfwm4.tar.gz
	bug3439.patch)
md5sums=('21da77e50b07e72bba784bf3418ca067' '8ed0d3c7dc07dde88ba7b38ce5006730' \
         'c65b0f59bebd10ea771042e7657ebdef')

build() {
  cd ${startdir}/src/${pkgname}-${pkgver}
  patch -Np0 -i ${srcdir}/bug3439.patch || return 1
  ./configure --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib/xfce4 \
    --localstatedir=/var --disable-static \
    --enable-compositor --enable-xsync || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
  cp -R ${srcdir}/ArchLinux ${pkgdir}/usr/share/themes || return 1
}
