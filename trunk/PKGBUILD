# $Id$
# Maintainer: Daniel Isenmann <daniel@archlinux.org>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=libgpod
pkgver=0.7.0
pkgrel=1
pkgdesc="libgpod is a shared library to access the contents of an iPod"
arch=(i686 x86_64)
license=('LGPL')
depends=('gtk2>=2.10.14' 'mutagen' 'sg3_utils')
makedepends=('perlxml' 'swig')
url="http://www.gtkpod.org/libgpod.html"
source=(http://downloads.sourceforge.net/sourceforge/gtkpod/${pkgname}-${pkgver}.tar.gz 
	add_string.patch)
options=(!libtool)

build() {
  cd ${startdir}/src/${pkgname}-${pkgver}
  patch -Np0 -i ../add_string.patch || return 1
  ./configure --prefix=/usr
  make PREFIX=/usr || return 1
  make PREFIX=/usr DESTDIR=${startdir}/pkg install || return 1
  sed -i -e 's|glib-2.0|gobject-2.0|' ${startdir}/pkg/usr/lib/pkgconfig/libgpod-1.0.pc
}
md5sums=('34eba68a6037e6b2feda20f46d1dbfb8'
         '0accf863699c12ae538df9e70467df06')
