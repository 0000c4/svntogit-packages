# $Id$
# Maintainer: judd <jvinet@zeroflux.org>
pkgname=grep
pkgver=2.5.3
pkgrel=3
pkgdesc="A string search utility"
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.gnu.org/software/grep/grep.html"
groups=('base')
depends=('glibc' 'pcre')
makedepends=('texinfo>=4.8a')
source=(ftp://ftp.gnu.org/gnu/$pkgname/$pkgname-$pkgver.tar.gz
	14-mem-exhausted.patch
	15-empty-pattern.patch
	# fix for FS#7141 , extracted from debian diff.gz :
	# http://ftp.debian.org/debian/pool/main/g/grep/
	64-egf-speedup.patch
)
md5sums=('4f371f25f413f700fb1984b878421f9d' 'bc937da562d468f32c1fef2894610283'
         'f421415b679ebcc9152797caaa0b1d51' 'efbe9d49d71a74092db6b86224b09fdd')

build() {
  cd $startdir/src/$pkgname-$pkgver
  for i in ../*.patch; do
	patch -Np1 -i ../$i 
  done
  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install
  mkdir $startdir/pkg/bin
  mv $startdir/pkg/usr/bin/*grep $startdir/pkg/bin/
  rmdir $startdir/pkg/usr/bin
}
