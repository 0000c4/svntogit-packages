# $Id$
# Maintainer: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: dale <dale@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=gpart
pkgver=0.1h
pkgrel=4
pkgdesc="A program for recovering corrupt partition tables"
arch=('i686' 'x86_64')
url="http://www.stud.uni-hannover.de/user/76201/gpart/"
license=('GPL')
depends=('glibc')
source=(http://www.sfr-fresh.com/linux/misc/${pkgname}-${pkgver}.tar.gz 
                gpart-0.1h-errno.patch 
                gpart-0.1h-vfat.patch 
                gpart-0.1h-ntfs.patch 
                gpart-0.1h-PIC.patch 
                gpart-0.1h-no-_syscall.patch)
md5sums=('ee3a2d2dde70bcf404eb354b3d1ee6d4' 
                       '81eee5d9985df9bf9c23624e46cf945f'
                       'ae6d86b0268618d34e618824dcd82754' 
                       '8161c02116ee4575906587eb09e35bde'
                       'd3f5b05d12816375f5dcd9a251f72f61' 
                       'f811c6e132b2c0cd2d9cb0fd4933063a')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch -Np1 -i ${srcdir}/gpart-0.1h-errno.patch
  patch -Np1 -i ${srcdir}/gpart-0.1h-vfat.patch
  patch -Np1 -i ${srcdir}/gpart-0.1h-ntfs.patch
  patch -Np1 -i ${srcdir}/gpart-0.1h-PIC.patch
  patch -Np0 -i ${srcdir}/gpart-0.1h-no-_syscall.patch

  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make prefix=${pkgdir}/usr mandir=${pkgdir}/usr/share/man install
}
