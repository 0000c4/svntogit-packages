# $Id$
# Maintainer: tobias [ tobias funnychar archlinux org ]
# Contributor: flx <effelleks@googlemail.com>

pkgname=vi
_pkgname=nvi
pkgver=1.81.6
pkgrel=2
pkgdesc='A reimplementation of the ex/vi text editors with unicode support.'
arch=('i686' 'x86_64')
url='http://www.kotnet.org/~skimo/nvi/'
license=('custom:nvi')
groups=('base')
conflicts=('nvi-unicode')
depends=('bash' 'db')
options=(!libtool force)
source=(http://www.kotnet.org/~skimo/nvi/devel/${_pkgname}-${pkgver}.tar.bz2 \
        db47-hack.patch widechar.patch c_locale.patch)
md5sums=('88d1e23115ee9f2961186b62e55f5704' 'f9dd0ee3b00e1a9915c49acc5a241a6d' \
         '36855b815a7bf701632bc7c2b0777570' 'c2fba3fde17835bb9c90ed661231c807')

build() {
  cd ${srcdir}/${_pkgname}-${pkgver}/
  patch -p1 -i../db47-hack.patch || return 1
  patch -Np1 -i ../widechar.patch || return 1
  patch -Np1 -i ../c_locale.patch || return 1
  cd ./build.unix
  ../dist/configure --prefix=/usr --program-prefix= --enable-widechar
  make || return 1
  make DESTDIR=${pkgdir} install
  install -D -m644 ../LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
## vim:set ts=2 sw=2 et:
