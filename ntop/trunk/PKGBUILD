# $Id$
# Maintainer: Aaron Griffin <aaron@archlinux.org>

pkgname=ntop
pkgver=3.3.9
pkgrel=1
pkgdesc="A network traffic probe that shows the network usage"
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.ntop.org"
depends=('libpcap>=1.0.0' 'gd' 'glib' 'libxml2' 'openssl' 'gdbm' 'rrdtool'
'pcre' 'geoip')
options=('!libtool' '!makeflags')
install=ntop.install
source=(http://downloads.sourceforge.net/sourceforge/ntop/ntop-$pkgver.tar.gz
        ntop.confd ntop.rcd)

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./autogen.sh --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
      --disable-snmp || return 1
  make || return 1
  make DESTDIR=${pkgdir} install-recursive || return 1
  install -d -m755 --owner=nobody --group=nobody ${pkgdir}/var/ntop || return 1

  install -D -m755 ${srcdir}/ntop.rcd ${pkgdir}/etc/rc.d/ntop  || return 1
  install -D -m644 ${srcdir}/ntop.confd ${pkgdir}/etc/conf.d/ntop || return 1
}
md5sums=('0c22038e0f2aa003110437b5a5d5a6a5'
         'b4ea63012f94c2988e767e78ac16a309'
         '76acde24cc5f428ff862d7c0815feb14')
