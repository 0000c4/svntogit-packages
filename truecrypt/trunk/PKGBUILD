# $Id$
# Maintainer: Paul Mattal <paul@archlinux.org>

pkgname=truecrypt
pkgver=6.1
pkgrel=1
pkgdesc="Free open-source cross-platform disk encryption software"
arch=('i686' 'x86_64')
depends=('fuse' 'wxgtk>=2.8.9' 'libsm' 'device-mapper')
# N.B. Truecrypt's web-based source download is incompatible with
# makepkg. Source has been placed on ftp.archlinux.org instead
source=(ftp://ftp.archlinux.org/other/tc/$pkgname-$pkgver.tar.gz
	ftp://ftp.archlinux.org/other/tc/pkcs-2.20.tar.gz
	http://prdownloads.sourceforge.net/wxwindows/wxWidgets-2.8.9.tar.bz2)
url="http://www.truecrypt.org/"
license=('custom')
conflicts=('truecrypt-utils')
replaces=('truecrypt-utils')
install=

build() {
  export PKCS11_INC="$startdir/src/pkcs-2.20"

  cd $startdir/src/truecrypt-$pkgver-source || return 1
  make WX_ROOT=$startdir/src/wxWidgets-2.8.9 wxbuild || return 1
  make || return 1

  install -Dm755 Main/truecrypt $startdir/pkg/usr/bin/truecrypt || return 1
  install -Dm644 License.txt \
  	$startdir/pkg/usr/share/licenses/truecrypt/License.txt || return 1
}
md5sums=('6907f7492ed204d764552837947dd4d3'
         'ce6a707b79411e82e8e558aa03e764b0'
         'b0b2d0f6915a21ca6f33896ee8f50387')
