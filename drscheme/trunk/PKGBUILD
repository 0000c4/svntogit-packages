# $Id$
# Maintainer: Eric Belanger <eric@archlinux.org>
# Contributor: John Proctor <jproctor@prium.net>

pkgname=drscheme
pkgver=4.2.3
pkgrel=3
pkgdesc="PLT Scheme Environment"
arch=('i686' 'x86_64')
url="http://www.drscheme.org/"
license=('LGPL')
depends=('gcc-libs' 'cairo' 'desktop-file-utils' 'libjpeg' 'mesa' 'openssl' 'libxaw' 'libxmu' 'libxft')
options=('!makeflags')
install=drscheme.install
source=(http://download.plt-scheme.org/bundles/${pkgver}/plt/plt-${pkgver}-src-unix.tgz drscheme.desktop libpng-1.4.patch)
md5sums=('041ad51e17cf864e5d8771edae8e943a' '41ba9c74aa541308aa6f67b262387c6c'\
         'ec18faef466c1f18047d14a50be0413c')
sha1sums=('d6b401e0f1fbaedcfcd1c7ebc718f2c5d54b9832' '6b8247da9ce5f1e83f35bc14f90e8c34aae0e0d5'\
         '2280da2a2ce28b13530c9e749939b895c25fd22e')

build() {
  cd "${srcdir}/plt-${pkgver}/src"
  patch -p2 < ../../libpng-1.4.patch || return 1
  ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  install -D -m644 ../collects/icons/plt.xpm "${pkgdir}/usr/share/pixmaps/drscheme.xpm" || return 1
  install -D -m644 "${srcdir}/drscheme.desktop" "${pkgdir}/usr/share/applications/drscheme.desktop" || return 1
}
