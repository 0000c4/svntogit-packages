# HG changeset patch
# User Mark Wielaard <mark@klomp.org>
# Date 1257249030 -3600
# Node ID c75348f9db6a48f22f2568c8f2d346e5d0ac73be
# Parent 547923046557e6b3d0f675274e783571a385bb85
Support newer X11 headers for awt_GraphicsEnv.h.

--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/patches/icedtea-xshm.patch	Tue Nov 03 12:50:30 2009 +0100
@@ -0,0 +1,13 @@
+--- old/jdk/src/solaris/native/sun/awt/awt_GraphicsEnv.h	2009-07-17 10:36:09.000000000 -0400
++++ openjdk/jdk/src/solaris/native/sun/awt/awt_GraphicsEnv.h	2009-07-30 13:25:52.000000000 -0400
+@@ -42,6 +42,10 @@
+ #include <sys/ipc.h>
+ #include <sys/shm.h>
+ #include <X11/extensions/XShm.h>
++#ifndef X_ShmAttach
++#include <X11/Xmd.h>
++#include <X11/extensions/shmproto.h>
++#endif
+ 
+ extern int XShmQueryExtension();
+ 

--- icedtea6-1.6.1/Makefile.am	2009-09-14 16:42:42.367592000 +0000
+++ icedtea6-1.6.1/Makefile.am.new	2009-11-03 16:42:12.387191646 +0000
@@ -708,6 +708,7 @@
 	patches/icedtea-explicit-target-arch.patch \
 	patches/openjdk/6648816.patch \
 	patches/openjdk/oj100103-debugger-socket-overflow.patch \
+	patches/icedtea-xshm.patch \
 	$(DISTRIBUTION_PATCHES)
 
 stamps/extract.stamp: stamps/download.stamp
